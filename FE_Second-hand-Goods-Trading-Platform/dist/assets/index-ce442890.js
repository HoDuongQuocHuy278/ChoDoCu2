import{_ as P,a as S,y as R,c as v,b as s,d as U,e as M,E as N,w as a,j as _,n as d,t as h,G as x,H as T,g as V,h as C,f as j,o as g,p as E,k as K}from"./index-01669123.js";const D={name:"Register",data(){return{user:{ho_va_ten:"",email:"",so_dien_thoai:"",cccd:"",ngay_sinh:"",password:"",re_password:""},showPassword:!1,showRePassword:!1,isLoading:!1,agree:!1,touched:{},errors:{ho_va_ten:"",email:"",so_dien_thoai:"",cccd:"",ngay_sinh:"",password:"",re_password:"",agree:""}}},methods:{touch(i){this.touched[i]=!0,this.validate()},validate(){const i={ho_va_ten:"",email:"",so_dien_thoai:"",cccd:"",ngay_sinh:"",password:"",re_password:"",agree:""};this.touched.ho_va_ten&&!this.user.ho_va_ten&&(i.ho_va_ten="Vui lòng nhập họ tên.");const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.touched.email&&!this.user.email?i.email="Vui lòng nhập email.":this.touched.email&&!t.test(this.user.email)&&(i.email="Email không hợp lệ.");const c=/^\d{10,11}$/;this.touched.so_dien_thoai&&!this.user.so_dien_thoai?i.so_dien_thoai="Vui lòng nhập số điện thoại.":this.touched.so_dien_thoai&&!c.test(this.user.so_dien_thoai)&&(i.so_dien_thoai="Số điện thoại không hợp lệ.");const u=/^\d{9,12}$/;return this.touched.cccd&&!this.user.cccd?i.cccd="Vui lòng nhập CCCD.":this.touched.cccd&&!u.test(this.user.cccd)&&(i.cccd="CCCD không hợp lệ."),this.touched.ngay_sinh&&!this.user.ngay_sinh&&(i.ngay_sinh="Vui lòng chọn ngày sinh."),this.touched.password&&!this.user.password?i.password="Vui lòng nhập mật khẩu.":this.touched.password&&this.user.password.length<6&&(i.password="Mật khẩu tối thiểu 6 ký tự."),this.touched.re_password&&!this.user.re_password?i.re_password="Vui lòng nhập lại mật khẩu.":this.touched.re_password&&this.user.re_password!==this.user.password&&(i.re_password="Mật khẩu nhập lại không khớp."),this.touched.agree&&!this.agree&&(i.agree="Bạn cần đồng ý với điều khoản."),this.errors=i,Object.values(i).every(e=>e==="")},async dangKyTaiKhoan(){var t,c,u,e,r,p,o,f,b,w;if(Object.keys(this.errors).forEach(l=>this.touched[l]=!0),!this.validate())return;if(!this.agree){this.touched.agree=!0,this.validate();return}this.isLoading=!0;const i="/api/client";try{const l=await S.post(`${i}/dang-ky`,this.user);(t=l.data)!=null&&t.status?((u=this.$toast)==null||u.success(((c=l.data)==null?void 0:c.message)||"Đăng ký thành công, vui lòng kiểm tra email kích hoạt."),this.$router.push("/dang-nhap")):(r=this.$toast)==null||r.error(((e=l.data)==null?void 0:e.message)||"Đăng ký tài khoản thất bại")}catch(l){const y=(o=(p=l==null?void 0:l.response)==null?void 0:p.data)==null?void 0:o.errors;if(y)for(const[k,m]of Object.entries(y))this.touched[k]=!0,this.errors[k]=Array.isArray(m)?m[0]:String(m);const B=((b=(f=l==null?void 0:l.response)==null?void 0:f.data)==null?void 0:b.message)||"Có lỗi xảy ra. Vui lòng thử lại.";(w=this.$toast)==null||w.error(B)}finally{this.isLoading=!1}}}},n=i=>(E("data-v-fb9e03d2"),i=i(),K(),i),L={class:"auth d-flex align-items-center justify-content-center py-5 py-lg-0",style:{"min-height":"100vh"}},A={class:"container"},I={class:"row justify-content-center"},O={class:"col-12 col-lg-10 col-xl-8"},H={class:"card border-0 shadow-lg rounded-4 overflow-hidden"},q={class:"row g-0 align-items-stretch"},z=j('<div class="col-lg-5 d-none d-lg-flex flex-column justify-content-between p-4 brand-pane" data-v-fb9e03d2><div data-v-fb9e03d2><div class="badge bg-success-subtle text-success mb-2" data-v-fb9e03d2>Chợ Đồ Cũ</div><h3 class="fw-bold m-0" data-v-fb9e03d2>Tạo tài khoản</h3><p class="text-muted mt-2 mb-0" data-v-fb9e03d2>Bắt đầu mua bán nhanh – an toàn – tiện lợi.</p></div><ul class="small text-muted list-unstyled m-0" data-v-fb9e03d2><li data-v-fb9e03d2>• Kích hoạt qua email</li><li data-v-fb9e03d2>• Bảo mật tài khoản</li><li data-v-fb9e03d2>• Quản lý đơn dễ dàng</li></ul></div>',1),G={class:"col-lg-7 p-4 p-lg-5 bg-white"},Q=n(()=>s("div",{class:"text-center mb-3 d-lg-none"},[s("h3",{class:"fw-bold"},"Đăng ký tài khoản")],-1)),F={class:"text-center mb-3"},J=n(()=>s("span",{class:"text-muted"},"Bạn đã có tài khoản?",-1)),W={class:"row g-3"},X={class:"col-sm-6"},Y=n(()=>s("label",{class:"form-label"},"Họ và tên",-1)),Z={class:"invalid-feedback"},$={class:"col-sm-6"},ss=n(()=>s("label",{class:"form-label"},"Email",-1)),es={class:"invalid-feedback"},ts={class:"col-sm-4"},os=n(()=>s("label",{class:"form-label"},"Số điện thoại",-1)),is={class:"invalid-feedback"},ns={class:"col-sm-4"},rs=n(()=>s("label",{class:"form-label"},"Số CCCD",-1)),ls={class:"invalid-feedback"},ds={class:"col-sm-4"},as=n(()=>s("label",{class:"form-label"},"Ngày sinh",-1)),hs={class:"invalid-feedback"},cs={class:"col-12 col-md-6"},us=n(()=>s("label",{class:"form-label"},"Mật khẩu",-1)),_s={class:"input-group"},ps=["type"],ms=["aria-pressed"],vs={class:"invalid-feedback"},gs=n(()=>s("div",{class:"form-text"},"Mẹo: dùng chữ hoa + số để mạnh hơn.",-1)),fs={class:"col-12 col-md-6"},bs=n(()=>s("label",{class:"form-label"},"Nhập lại mật khẩu",-1)),ws={class:"input-group"},ys=["type"],ks=["aria-pressed"],xs={class:"invalid-feedback"},Vs={class:"col-12"},Cs={class:"form-check form-switch"},Bs=n(()=>s("label",{class:"form-check-label",for:"agree"},"Tôi đồng ý với Điều khoản dịch vụ & Chính sách bảo mật.",-1)),Ps={key:0,class:"text-danger small mt-1"},Ss={class:"col-12"},Rs={class:"d-grid"},Us=["disabled"],Ms={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Ns=n(()=>s("i",{class:"bx bx-user me-1"},null,-1)),Ts=n(()=>s("p",{class:"small text-muted text-center mt-4 mb-0"},"Sau khi đăng ký, hệ thống sẽ gửi email để kích hoạt tài khoản.",-1));function js(i,t,c,u,e,r){const p=R("router-link");return g(),v("div",L,[s("div",A,[s("div",I,[s("div",O,[s("div",H,[s("div",q,[z,s("div",G,[Q,s("div",F,[J,U(p,{to:"/dang-nhap",class:"ms-1 fw-semibold"},{default:M(()=>[C("Đăng nhập tại đây")]),_:1})]),s("form",{onSubmit:t[17]||(t[17]=N((...o)=>r.dangKyTaiKhoan&&r.dangKyTaiKhoan(...o),["prevent"])),novalidate:""},[s("div",W,[s("div",X,[Y,a(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.user.ho_va_ten=o),type:"text",class:d(["form-control",{"is-invalid":e.errors.ho_va_ten}]),placeholder:"Nguyễn Văn A",onBlur:t[1]||(t[1]=o=>r.touch("ho_va_ten"))},null,34),[[_,e.user.ho_va_ten,void 0,{trim:!0}]]),s("div",Z,h(e.errors.ho_va_ten),1)]),s("div",$,[ss,a(s("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>e.user.email=o),type:"email",class:d(["form-control",{"is-invalid":e.errors.email}]),placeholder:"you@example.com",onBlur:t[3]||(t[3]=o=>r.touch("email"))},null,34),[[_,e.user.email,void 0,{trim:!0}]]),s("div",es,h(e.errors.email),1)]),s("div",ts,[os,a(s("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>e.user.so_dien_thoai=o),type:"tel",class:d(["form-control",{"is-invalid":e.errors.so_dien_thoai}]),placeholder:"09xx...",onBlur:t[5]||(t[5]=o=>r.touch("so_dien_thoai"))},null,34),[[_,e.user.so_dien_thoai,void 0,{trim:!0}]]),s("div",is,h(e.errors.so_dien_thoai),1)]),s("div",ns,[rs,a(s("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>e.user.cccd=o),type:"text",class:d(["form-control",{"is-invalid":e.errors.cccd}]),placeholder:"0123456789",onBlur:t[7]||(t[7]=o=>r.touch("cccd"))},null,34),[[_,e.user.cccd,void 0,{trim:!0}]]),s("div",ls,h(e.errors.cccd),1)]),s("div",ds,[as,a(s("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>e.user.ngay_sinh=o),type:"date",class:d(["form-control",{"is-invalid":e.errors.ngay_sinh}]),min:"1900-01-01",max:"2030-12-31",onBlur:t[9]||(t[9]=o=>r.touch("ngay_sinh"))},null,34),[[_,e.user.ngay_sinh]]),s("div",hs,h(e.errors.ngay_sinh),1)]),s("div",cs,[us,s("div",_s,[a(s("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>e.user.password=o),type:e.showPassword?"text":"password",class:d(["form-control border-end-0",{"is-invalid":e.errors.password}]),placeholder:"Tối thiểu 6 ký tự",onBlur:t[11]||(t[11]=o=>r.touch("password"))},null,42,ps),[[x,e.user.password]]),s("button",{type:"button",class:"input-group-text bg-transparent",onClick:t[12]||(t[12]=o=>e.showPassword=!e.showPassword),"aria-pressed":e.showPassword?"true":"false"},[s("i",{class:d(e.showPassword?"bx bx-show":"bx bx-hide")},null,2)],8,ms),s("div",vs,h(e.errors.password),1)]),gs]),s("div",fs,[bs,s("div",ws,[a(s("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>e.user.re_password=o),type:e.showRePassword?"text":"password",class:d(["form-control border-end-0",{"is-invalid":e.errors.re_password}]),onBlur:t[14]||(t[14]=o=>r.touch("re_password"))},null,42,ys),[[x,e.user.re_password]]),s("button",{type:"button",class:"input-group-text bg-transparent",onClick:t[15]||(t[15]=o=>e.showRePassword=!e.showRePassword),"aria-pressed":e.showRePassword?"true":"false"},[s("i",{class:d(e.showRePassword?"bx bx-show":"bx bx-hide")},null,2)],8,ks),s("div",xs,h(e.errors.re_password),1)])]),s("div",Vs,[s("div",Cs,[a(s("input",{class:"form-check-input",type:"checkbox",id:"agree","onUpdate:modelValue":t[16]||(t[16]=o=>e.agree=o)},null,512),[[T,e.agree]]),Bs]),e.errors.agree?(g(),v("div",Ps,h(e.errors.agree),1)):V("",!0)]),s("div",Ss,[s("div",Rs,[s("button",{type:"submit",class:"btn btn-success text-uppercase",disabled:e.isLoading},[e.isLoading?(g(),v("span",Ms)):V("",!0),Ns,C(" Đăng ký ")],8,Us)])])])],32),Ts])])])])])])])}const Ks=P(D,[["render",js],["__scopeId","data-v-fb9e03d2"]]);export{Ks as default};
