import{_ as y,a as w,c as i,b as t,F as v,r as p,w as u,v as f,t as g,d as k,e as C,T as x,f as m,o as c,g as _,n as T,h as M,i as B,j as I,p as S,k as L}from"./index-01669123.js";import{f as V}from"./imageHelper-6b936e79.js";import"./config-162ba8a8.js";const N={name:"TrangChu",data(){return{API_BASE_URL:"/api/client",isLoggedIn:!1,routes:{sell:"/sell",login:"/dang-nhap",register:"/dang-ky",search:"/search"},cats:[],showChat:!1,messages:[],msg:"",typing:!1,unreadCount:0}},mounted(){this.isLoggedIn=!!localStorage.getItem("key_client"),this.fetchCategories(),window.addEventListener("keydown",this.onKey)},beforeUnmount(){window.removeEventListener("keydown",this.onKey)},watch:{messages(){this.$nextTick(this.scrollToBottom)}},methods:{async fetchCategories(){try{const{data:e}=await w.get(`${this.API_BASE_URL}/danh-muc`),o=(e==null?void 0:e.data)||e||[];this.cats=Array.isArray(o)?o.map(l=>({id:l.id,slug:l.slug,name:l.ten_danh_muc||l.name,ten_danh_muc:l.ten_danh_muc,hinh_anh:l.hinh_anh,icon:this.getCategoryIcon(l.slug),mo_ta:l.mo_ta})):[{slug:"dien-thoai",name:"Äiá»‡n thoáº¡i",icon:"ğŸ“±"},{slug:"sach",name:"SÃ¡ch",icon:"ğŸ“š"},{slug:"do-dien-tu",name:"Äá»“ Ä‘iá»‡n tá»­",icon:"ğŸ’¡"},{slug:"may-tinh",name:"MÃ¡y tÃ­nh",icon:"ğŸ–¥ï¸"},{slug:"thoi-trang",name:"Thá»i trang",icon:"ğŸ‘•"},{slug:"do-gia-dung",name:"Gia dá»¥ng",icon:"ğŸ³"}]}catch(e){console.warn("KhÃ´ng thá»ƒ táº£i danh má»¥c",e),this.cats=[{slug:"dien-thoai",name:"Äiá»‡n thoáº¡i",icon:"ğŸ“±"},{slug:"sach",name:"SÃ¡ch",icon:"ğŸ“š"},{slug:"do-dien-tu",name:"Äá»“ Ä‘iá»‡n tá»­",icon:"ğŸ’¡"},{slug:"may-tinh",name:"MÃ¡y tÃ­nh",icon:"ğŸ–¥ï¸"},{slug:"thoi-trang",name:"Thá»i trang",icon:"ğŸ‘•"},{slug:"do-gia-dung",name:"Gia dá»¥ng",icon:"ğŸ³"}]}},getCategoryIcon(e){return{"dien-thoai":"ğŸ“±",sach:"ğŸ“š","do-dien-tu":"ğŸ’¡","may-tinh":"ğŸ–¥ï¸","thoi-trang":"ğŸ‘•","do-gia-dung":"ğŸ³"}[e]||"ğŸ“¦"},toggleChat(){this.showChat=!this.showChat,this.showChat&&(this.unreadCount=0),this.$nextTick(this.scrollToBottom)},buildSearchUrl(e){return`${this.routes.search}?category=${encodeURIComponent(e)}`},async sendMessage(){const e=this.msg.trim();if(!(!e||this.typing)){this.messages.push({from:"you",text:e,time:new Date}),this.msg="",this.typing=!0,await this.$nextTick(),this.scrollToBottom();try{const o={}.VITE_CHATBOT_URL||"http://192.168.1.61:5000",l=await fetch(`${o}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const h=await l.json(),a=h.reply||h.response||h.error||"Xin lá»—i, tÃ´i khÃ´ng thá»ƒ pháº£n há»“i ngay bÃ¢y giá». Vui lÃ²ng thá»­ láº¡i sau.";this.messages.push({from:"bot",text:a,time:new Date,products:h.products||null,more_url:h.more_url||null})}catch(o){console.error("Chatbot error:",o);const l=["Xin lá»—i, chatbot Ä‘ang táº¡m thá»i khÃ´ng kháº£ dá»¥ng. Vui lÃ²ng liÃªn há»‡ bá»™ pháº­n há»— trá»£ qua email hoáº·c hotline.","Xin lá»—i, tÃ´i khÃ´ng thá»ƒ káº¿t ná»‘i Ä‘Æ°á»£c. Báº¡n vui lÃ²ng thá»­ láº¡i sau hoáº·c liÃªn há»‡ trá»±c tiáº¿p vá»›i chÃºng tÃ´i.","Hiá»‡n táº¡i chatbot Ä‘ang báº£o trÃ¬. Náº¿u báº¡n cáº§n há»— trá»£ ngay, vui lÃ²ng liÃªn há»‡ qua thÃ´ng tin trong trang LiÃªn há»‡."],h=l[Math.floor(Math.random()*l.length)];this.messages.push({from:"bot",text:h,time:new Date})}finally{this.typing=!1}await this.$nextTick(),this.scrollToBottom(),this.showChat||this.unreadCount++}},formatMessageTime(e){if(!e)return"";const o=new Date(e),h=new Date-o,a=Math.floor(h/6e4);return a<1?"Vá»«a xong":a<60?`${a} phÃºt trÆ°á»›c`:o.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})},formatBotMessage(e){return e?e.replace(/\n/g,"<br>"):""},formatPrice(e){return!e&&e!==0?"LiÃªn há»‡":`${Number(e).toLocaleString("vi-VN")} â‚«`},scrollToBottom(){const e=this.$refs.chatboxRef;e&&(e.scrollTop=e.scrollHeight)},onKey(e){e.altKey&&(e.key==="c"||e.key==="C")&&(e.preventDefault(),this.toggleChat()),e.key==="Escape"&&this.showChat&&this.toggleChat()},fixImage(e){return V(e)}}},n=e=>(S("data-v-285f0aee"),e=e(),L(),e),H={class:"homepage"},R={class:"hero"},q=m('<div class="hero-bg" data-v-285f0aee><div class="orb orb-1" data-v-285f0aee></div><div class="orb orb-2" data-v-285f0aee></div><div class="orb orb-3" data-v-285f0aee></div><div class="grid-overlay" data-v-285f0aee></div></div>',1),U={class:"container"},j={class:"hero-content"},A={class:"hero-left"},D=m('<div class="badge" data-v-285f0aee><span class="badge-emoji" data-v-285f0aee>ğŸ‰</span><span data-v-285f0aee>Æ¯u Ä‘Ã£i Ä‘áº·c biá»‡t thÃ¡ng nÃ y</span></div><h1 class="hero-title" data-v-285f0aee><span class="title-line-1" data-v-285f0aee>Chá»£ Äá»“ CÅ©</span><span class="title-line-2" data-v-285f0aee>Mua BÃ¡n ThÃ´ng Minh</span></h1><p class="hero-desc" data-v-285f0aee> Ná»n táº£ng mua bÃ¡n Ä‘á»“ cÅ© uy tÃ­n nháº¥t Viá»‡t Nam. <br class="d-none d-md-block" data-v-285f0aee> HoÃ n 100% phÃ­ bÃ¡n hÃ ng Â· Giao dá»‹ch an toÃ n Â· Há»— trá»£ 24/7 </p><div class="features" data-v-285f0aee><div class="feature" data-v-285f0aee><span class="feature-emoji" data-v-285f0aee>âœ¨</span><span data-v-285f0aee>Miá»…n phÃ­ Ä‘Äƒng bÃ¡n</span></div><div class="feature" data-v-285f0aee><span class="feature-emoji" data-v-285f0aee>ğŸ”’</span><span data-v-285f0aee>Báº£o máº­t tuyá»‡t Ä‘á»‘i</span></div><div class="feature" data-v-285f0aee><span class="feature-emoji" data-v-285f0aee>ğŸš€</span><span data-v-285f0aee>Giao dá»‹ch nhanh chÃ³ng</span></div></div>',4),E={key:0,class:"cta-buttons"},K=["href"],P=n(()=>t("span",null,"ï¼‹",-1)),X=n(()=>t("span",null,"ÄÄƒng bÃ¡n ngay",-1)),Q=n(()=>t("span",{class:"arrow"},"â†’",-1)),G=[P,X,Q],O={key:1,class:"cta-buttons"},z=["href"],F=n(()=>t("span",null,"Báº¯t Ä‘áº§u miá»…n phÃ­",-1)),J=n(()=>t("span",{class:"arrow"},"â†’",-1)),W=[F,J],Y=["href"],Z=n(()=>t("div",{class:"hero-right"},[t("div",{class:"card"},[t("div",{class:"card-icon"},"âœ…"),t("div",{class:"card-content"},[t("h3",null,"Cam káº¿t cháº¥t lÆ°á»£ng"),t("p",null,"Nháº­n sáº£n pháº©m Ä‘Ãºng nhÆ° mÃ´ táº£ hoáº·c Ä‘Æ°á»£c hoÃ n tiá»n 100%")])]),t("div",{class:"card card-highlight",role:"button","data-bs-toggle":"modal","data-bs-target":"#qrModal"},[t("div",{class:"card-icon"},"ğŸ“±"),t("div",{class:"card-content"},[t("h3",null,"Táº£i á»©ng dá»¥ng"),t("p",null,"QuÃ©t QR code Ä‘á»ƒ táº£i app vÃ  mua bÃ¡n má»i lÃºc má»i nÆ¡i")]),t("div",{class:"card-arrow"},"â†’")])],-1)),$=m('<div class="modal fade" id="qrModal" tabindex="-1" data-v-285f0aee><div class="modal-dialog modal-dialog-centered" data-v-285f0aee><div class="modal-content qr-modal" data-v-285f0aee><div class="modal-header qr-header" data-v-285f0aee><h1 class="modal-title" data-v-285f0aee>ğŸ“± Táº£i á»©ng dá»¥ng Chá»£ Äá»“ CÅ©</h1><button type="button" class="btn-close" data-bs-dismiss="modal" data-v-285f0aee><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-285f0aee><line x1="18" y1="6" x2="6" y2="18" data-v-285f0aee></line><line x1="6" y1="6" x2="18" y2="18" data-v-285f0aee></line></svg></button></div><div class="modal-body qr-body" data-v-285f0aee><div class="qr-wrapper" data-v-285f0aee><div class="qr-placeholder" style="width:150px;height:150px;background:#eee;display:flex;align-items:center;justify-content:center;" data-v-285f0aee>QR Code</div></div><p class="qr-text" data-v-285f0aee>QuÃ©t mÃ£ QR báº±ng camera Ä‘iá»‡n thoáº¡i Ä‘á»ƒ táº£i á»©ng dá»¥ng</p></div><div class="modal-footer qr-footer" data-v-285f0aee><button type="button" class="btn btn-close-modal" data-bs-dismiss="modal" data-v-285f0aee>ÄÃ³ng</button></div></div></div></div>',1),tt={class:"categories"},et={class:"container"},st=m('<div class="section-header" data-v-285f0aee><div data-v-285f0aee><h2 class="section-title" data-v-285f0aee>KhÃ¡m phÃ¡ danh má»¥c</h2><p class="section-subtitle" data-v-285f0aee>TÃ¬m kiáº¿m sáº£n pháº©m yÃªu thÃ­ch cá»§a báº¡n</p></div><a href="#" class="view-all" data-v-285f0aee><span data-v-285f0aee>Xem táº¥t cáº£</span><span class="arrow" data-v-285f0aee>â†’</span></a></div>',1),at={class:"categories-grid"},nt=["href","aria-label"],ot={class:"cat-icon-wrapper"},it={key:0,class:"cat-icon"},ct=["src","alt"],lt={key:1,class:"cat-icon emoji"},dt=n(()=>t("div",{class:"cat-glow"},null,-1)),ht={class:"cat-name"},rt=n(()=>t("div",{class:"cat-hover-bar"},null,-1)),gt=["aria-expanded"],ut=n(()=>t("svg",{class:"chat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})],-1)),_t={class:"chat-pulse"},mt={class:"chat-widget",role:"dialog"},vt={id:"chatbox",ref:"chatboxRef",class:"chat-messages"},pt={key:0,class:"welcome"},ft=n(()=>t("div",{class:"welcome-icon"},"ğŸ›’",-1)),bt=n(()=>t("h4",null,"ChÃ o má»«ng Ä‘áº¿n Chá»£ Äá»“ CÅ©!",-1)),yt=n(()=>t("p",null,"TÃ´i lÃ  chatbot há»— trá»£ cá»§a báº¡n. TÃ´i cÃ³ thá»ƒ giÃºp báº¡n:",-1)),wt=n(()=>t("ul",{class:"welcome-list"},[t("li",null,"ğŸ“¦ TÃ¬m kiáº¿m sáº£n pháº©m"),t("li",null,"ğŸ’° HÆ°á»›ng dáº«n mua bÃ¡n"),t("li",null,"ğŸ’³ ThÃ´ng tin thanh toÃ¡n"),t("li",null,"ğŸšš Váº­n chuyá»ƒn"),t("li",null,"ğŸ”„ Äá»•i tráº£ hÃ ng")],-1)),kt=n(()=>t("p",{class:"welcome-hint"},"Há»i tÃ´i báº¥t cá»© Ä‘iá»u gÃ¬ báº¡n muá»‘n biáº¿t!",-1)),Ct=[ft,bt,yt,wt,kt],xt={class:"message-content"},Tt=["innerHTML"],Mt={key:0,class:"products"},Bt=["href"],It={key:0,class:"product-img"},St=["src","alt"],Lt={key:1,class:"product-img placeholder"},Vt=n(()=>t("i",{class:"bx bx-package"},null,-1)),Nt=[Vt],Ht={class:"product-info"},Rt={class:"product-price"},qt=n(()=>t("div",{class:"product-arrow"},[t("i",{class:"bx bx-arrow-to-right"})],-1)),Ut=["href"],jt=n(()=>t("i",{class:"bx bx-grid-alt"},null,-1)),At={class:"message-time"},Dt={key:1,class:"message received typing"},Et=n(()=>t("div",{class:"typing-dots"},[t("span"),t("span"),t("span")],-1)),Kt=[Et],Pt={class:"chat-input"},Xt=["disabled"],Qt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Gt=n(()=>t("line",{x1:"22",y1:"2",x2:"11",y2:"13"},null,-1)),Ot=n(()=>t("polygon",{points:"22 2 15 22 11 13 2 9 22 2"},null,-1)),zt=[Gt,Ot],Ft={key:1,class:"spinner"};function Jt(e,o,l,h,a,d){return c(),i("div",H,[t("section",R,[q,t("div",U,[t("div",j,[t("div",A,[D,a.isLoggedIn?(c(),i("div",E,[t("a",{class:"btn btn-primary",href:a.routes.sell},G,8,K)])):(c(),i("div",O,[t("a",{class:"btn btn-primary",href:a.routes.register},W,8,z),t("a",{class:"btn btn-secondary",href:a.routes.login},"ÄÄƒng nháº­p",8,Y)]))]),Z])])]),$,t("section",tt,[t("div",et,[st,t("div",at,[(c(!0),i(v,null,p(a.cats,s=>(c(),i("a",{key:s.slug||s.id,class:"cat-card",href:d.buildSearchUrl(s.slug),"aria-label":`Xem danh má»¥c ${s.name||s.ten_danh_muc}`},[t("div",ot,[s.hinh_anh?(c(),i("div",it,[t("img",{src:d.fixImage(s.hinh_anh),alt:s.name||s.ten_danh_muc},null,8,ct)])):(c(),i("div",lt,g(s.icon||d.getCategoryIcon(s.slug)),1)),dt]),t("h3",ht,g(s.name||s.ten_danh_muc),1),rt],8,nt))),128))])])]),t("button",{id:"chat-toggle",class:"chat-btn",type:"button","aria-expanded":a.showChat,onClick:o[0]||(o[0]=(...s)=>d.toggleChat&&d.toggleChat(...s)),title:"Má»Ÿ chatbot (Alt+C)"},[ut,u(t("span",_t,null,512),[[f,!a.showChat&&a.unreadCount>0]]),u(t("span",{class:"unread"},g(a.unreadCount>9?"9+":a.unreadCount),513),[[f,!a.showChat&&a.unreadCount>0]])],8,gt),k(x,{name:"chat"},{default:C(()=>[u(t("div",mt,[t("div",vt,[a.messages.length===0?(c(),i("div",pt,Ct)):_("",!0),(c(!0),i(v,null,p(a.messages,(s,b)=>(c(),i("div",{key:b,class:T(["message",s.from==="you"?"sent":"received"])},[t("div",xt,[t("p",{innerHTML:d.formatBotMessage(s.text)},null,8,Tt),s.products&&s.products.length>0?(c(),i("div",Mt,[(c(!0),i(v,null,p(s.products,r=>(c(),i("div",{key:r.id,class:"product-card"},[t("a",{href:r.url,target:"_blank",class:"product-link"},[r.image?(c(),i("div",It,[t("img",{src:d.fixImage(r.image),alt:r.name},null,8,St)])):(c(),i("div",Lt,Nt)),t("div",Ht,[t("h4",null,g(r.name),1),t("p",Rt,g(r.price_formatted||d.formatPrice(r.price)),1)]),qt],8,Bt)]))),128)),s.more_url?(c(),i("a",{key:0,href:s.more_url,target:"_blank",class:"view-all"},[jt,M(" Xem táº¥t cáº£ sáº£n pháº©m ")],8,Ut)):_("",!0)])):_("",!0)]),t("span",At,g(d.formatMessageTime(s.time)),1)],2))),128)),a.typing?(c(),i("div",Dt,Kt)):_("",!0)],512),t("div",Pt,[u(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>a.msg=s),onKeyup:o[2]||(o[2]=B((...s)=>d.sendMessage&&d.sendMessage(...s),["enter"])),type:"text",placeholder:"Há»i vá» sáº£n pháº©m, mua bÃ¡n, thanh toÃ¡n...",class:"input-field"},null,544),[[I,a.msg]]),t("button",{class:"send-btn",onClick:o[3]||(o[3]=(...s)=>d.sendMessage&&d.sendMessage(...s)),disabled:!a.msg.trim()||a.typing},[a.typing?(c(),i("div",Ft)):(c(),i("svg",Qt,zt))],8,Xt)])],512),[[f,a.showChat]])]),_:1})])}const $t=y(N,[["render",Jt],["__scopeId","data-v-285f0aee"]]);export{$t as default};
