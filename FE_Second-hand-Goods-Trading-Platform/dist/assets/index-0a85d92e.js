import{_ as A,u as S,l as C,a as f,y as U,c as l,b as s,g as _,t as g,d as v,e as b,E as p,F as k,r as x,w as E,j as D,i as w,o as c,h as M,n as I,A as P,p as N,k as z}from"./index-01669123.js";const B={name:"ChatRealtime",setup(){const t=S(),e=C();return{route:t,router:e}},data(){return{API_BASE_URL:"/api/client",chatId:null,currentUserId:null,chatUser:{id:null,name:"",avatar:null,is_online:!1,last_seen:null},productInfo:null,messages:[],messageText:"",loading:!1,isTyping:!1,showAttachmentMenu:!1,showEmojiPicker:!1,previewImageUrl:null,commonEmojis:["ðŸ˜€","ðŸ˜‚","ðŸ˜","ðŸ¤”","ðŸ‘","â¤ï¸","ðŸŽ‰","ðŸ”¥","ðŸ’¯","ðŸ‘Œ","ðŸ˜Š","ðŸ˜¢","ðŸ˜¡","ðŸ‘","ðŸ™"],typingTimeout:null,lastTypingTime:null,pollInterval:null,fallbackImg:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQ1MCIgdmlld0JveD0iMCAwIDYwMCA0NTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI2MDAiIGhlaWdodD0iNDUwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0zMDAgMTgwQzM0NS4yMjkgMTgwIDM4MiAxNDMuMjI5IDM4MiA5OEMzODIgNTIuNzcwOSAzNDUuMjI5IDE2IDMwMCAxNkMyNTQuNzcwIDE2IDIxOCA1Mi43NzA5IDIxOCA5OEMyMTggMTQzLjIyOSAyNTQuNzcwIDE4MCAzMDAgMTgwWiIgZmlsbD0iIzlDQTNBRiIvPgo8cGF0aCBkPSJNMzAwIDI3MEMyNTAgMjcwIDIxMCAyOTAgMTg1IDMyMEg0MTVDMzkwIDI5MCAzNTAgMjcwIDMwMCAyNzBaIiBmaWxsPSIjOUNBM0FGIi8+Cjx0ZXh0IHg9IjMwMCIgeT0iMzQwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5Q0EzQUYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4="}},computed:{canSend(){return this.messageText.trim().length>0&&!this.loading}},mounted(){this.chatId=this.route.params.id,typeof this.chatId=="string"&&this.chatId.startsWith("chat-"),this.currentUserId=this.getCurrentUserId(),this.checkAuth(),Promise.all([this.loadChatInfo(),this.loadMessages()]).catch(t=>{console.error("Error loading chat data:",t)}),this.autoResizeTextarea(),this.pollInterval=setInterval(()=>{this.chatId&&!this.loading&&this.loadMessages()},5e3)},beforeUnmount(){this.typingTimeout&&clearTimeout(this.typingTimeout),this.pollInterval&&clearInterval(this.pollInterval)},methods:{checkAuth(){localStorage.getItem("key_client")||this.$router.push("/dang-nhap")},getCurrentUserId(){try{const t=localStorage.getItem("user_info");if(t)return JSON.parse(t).id}catch(t){console.warn("Cannot get user ID",t)}return null},async loadChatInfo(){var t,e;try{const d=localStorage.getItem("key_client");if(!d){this.$router.push("/dang-nhap");return}const o=this.chatId;let i=`${this.API_BASE_URL}/chat/${o}`;isNaN(o)&&(i=`${this.API_BASE_URL}/chat/${o}`);const{data:a}=await f.get(i,{headers:{Authorization:`Bearer ${d}`}});if(a!=null&&a.status&&(a!=null&&a.data)){const r=a.data;r.other_user&&(this.chatUser={id:r.other_user.id,name:r.other_user.name,avatar:null,is_online:!1,last_seen:null}),r.product&&(this.productInfo={id:r.product.id,title:r.product.title,price:r.product.price,image:Array.isArray(r.product.image)?r.product.image[0]:typeof r.product.image=="string"?JSON.parse(r.product.image||"[]")[0]||null:r.product.image})}}catch(d){console.error("Lá»—i khi táº£i thÃ´ng tin chat:",d),(((t=d.response)==null?void 0:t.status)===401||((e=d.response)==null?void 0:e.status)===403)&&this.$router.push("/dang-nhap")}},async loadMessages(){var e,d,o;const t=this.messages.length===0;t&&(this.loading=!0);try{const i=localStorage.getItem("key_client");if(!i){this.$router.push("/dang-nhap");return}const a=this.chatId,{data:r}=await f.get(`${this.API_BASE_URL}/chat/${a}/messages`,{headers:{Authorization:`Bearer ${i}`},params:{per_page:100}});r!=null&&r.status&&((e=r==null?void 0:r.data)!=null&&e.data)?this.messages=r.data.data.map(n=>({...n,status:n.is_read?"read":"delivered"})):t&&(this.messages=[]),this.$nextTick(()=>{this.scrollToBottom()})}catch(i){console.error("Lá»—i khi táº£i tin nháº¯n:",i),(((d=i.response)==null?void 0:d.status)===401||((o=i.response)==null?void 0:o.status)===403)&&this.$router.push("/dang-nhap"),t&&(this.messages=[])}finally{t&&(this.loading=!1)}},async sendMessage(){var o,i,a,r;if(!this.canSend)return;const t=this.messageText.trim();this.messageText="",this.showEmojiPicker=!1,this.showAttachmentMenu=!1,this.autoResizeTextarea();const e=Date.now(),d={id:e,sender_id:this.currentUserId,content:t,type:"text",created_at:new Date().toISOString(),status:"sending",is_read:!1};this.messages.push(d),this.$nextTick(()=>{this.scrollToBottom()});try{const n=localStorage.getItem("key_client");if(!n){this.$router.push("/dang-nhap");return}const m=this.chatId,{data:u}=await f.post(`${this.API_BASE_URL}/chat/${m}/messages`,{content:t,type:"text"},{headers:{Authorization:`Bearer ${n}`}});if(u!=null&&u.status&&(u!=null&&u.data)){const y=this.messages.findIndex(T=>T.id===e);y>-1?this.messages[y]={id:u.data.id,sender_id:u.data.sender_id,content:u.data.content,type:u.data.type,created_at:u.data.created_at,status:"delivered",is_read:!1}:this.messages.push({id:u.data.id,sender_id:u.data.sender_id,content:u.data.content,type:u.data.type,created_at:u.data.created_at,status:"delivered",is_read:!1}),this.$nextTick(()=>{this.scrollToBottom()})}}catch(n){console.error("Lá»—i khi gá»­i tin nháº¯n:",n);const m=this.messages.findIndex(u=>u.id===e);m>-1&&(this.messages[m].status="error"),((o=n.response)==null?void 0:o.status)===401||((i=n.response)==null?void 0:i.status)===403?this.$router.push("/dang-nhap"):(r=(a=this.$toast)==null?void 0:a.error)==null||r.call(a,"KhÃ´ng thá»ƒ gá»­i tin nháº¯n. Vui lÃ²ng thá»­ láº¡i.")}},handleTyping(){this.autoResizeTextarea();const t=Date.now();(!this.lastTypingTime||t-this.lastTypingTime>3e3)&&(this.lastTypingTime=t),this.typingTimeout&&clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout(()=>{},3e3)},handleEnterKey(t){t.shiftKey||(t.preventDefault(),this.sendMessage())},handleShiftEnter(t){},autoResizeTextarea(){this.$nextTick(()=>{const t=this.$refs.messageInput;t&&(t.style.height="auto",t.style.height=Math.min(t.scrollHeight,120)+"px")})},scrollToBottom(){const t=this.$refs.messagesContainer;t&&(t.scrollTop=t.scrollHeight)},handleScroll(){},shouldShowAvatar(t,e){if(t.sender_id===this.currentUserId)return!1;if(e===0)return!0;const d=this.messages[e-1];return!d||d.sender_id!==t.sender_id?!0:new Date(t.created_at)-new Date(d.created_at)>3e5},toggleAttachmentMenu(){this.showAttachmentMenu=!this.showAttachmentMenu,this.showEmojiPicker=!1},toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker,this.showAttachmentMenu=!1},insertEmoji(t){const e=this.$refs.messageInput;if(e){const d=e.selectionStart,o=this.messageText.substring(0,d),i=this.messageText.substring(d);this.messageText=o+t+i,this.$nextTick(()=>{e.focus(),e.setSelectionRange(d+t.length,d+t.length),this.autoResizeTextarea()})}},handleImageUpload(){const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=e=>{var o,i;e.target.files[0]&&((i=(o=this.$toast)==null?void 0:o.info)==null||i.call(o,"TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn"))},t.click(),this.showAttachmentMenu=!1},handleFileUpload(){const t=document.createElement("input");t.type="file",t.onchange=e=>{var o,i;e.target.files[0]&&((i=(o=this.$toast)==null?void 0:o.info)==null||i.call(o,"TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn"))},t.click(),this.showAttachmentMenu=!1},handleProductShare(){var t,e;(e=(t=this.$toast)==null?void 0:t.info)==null||e.call(t,"TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn"),this.showAttachmentMenu=!1},previewImage(t){this.previewImageUrl=t},closeImagePreview(){this.previewImageUrl=null},handleCall(){var t,e;(e=(t=this.$toast)==null?void 0:t.info)==null||e.call(t,"TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn")},handleVideoCall(){var t,e;(e=(t=this.$toast)==null?void 0:t.info)==null||e.call(t,"TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn")},toggleMenu(){var t,e;(e=(t=this.$toast)==null?void 0:t.info)==null||e.call(t,"TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn")},viewProfile(){var t,e;(e=(t=this.$toast)==null?void 0:t.info)==null||e.call(t,"TÃ­nh nÄƒng Ä‘ang phÃ¡t triá»ƒn")},formatMessageTime(t){if(!t)return"";const e=new Date(t),o=new Date-e,i=Math.floor(o/6e4),a=Math.floor(o/36e5),r=Math.floor(o/864e5);return i<1?"Vá»«a xong":i<60?`${i} phÃºt`:a<24?a===1?"1 giá»":`${a} giá»`:r===0?e.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}):r===1?"HÃ´m qua":r<7?`${r} ngÃ y trÆ°á»›c`:e.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})},formatLastSeen(t){if(!t)return"";const e=new Date(t),o=new Date-e,i=Math.floor(o/6e4),a=Math.floor(o/36e5);return i<1?"vá»«a xong":i<60?`${i} phÃºt trÆ°á»›c`:a<24?`${a} giá» trÆ°á»›c`:e.toLocaleDateString("vi-VN")},formatPrice(t){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)},formatFileSize(t){if(!t)return"0 B";const e=1024,d=["B","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,o)*100)/100+" "+d[o]},formatMessage(t){if(!t)return"";const e=/(https?:\/\/[^\s]+)/g;return t.replace(e,'<a href="$1" target="_blank">$1</a>')},onAvatarError(t){t.target.style.display="none",t.target.nextElementSibling&&(t.target.nextElementSibling.style.display="flex")},onProductImgError(t){if(t.target.dataset.fallbackSet==="true"){t.target.style.display="none";return}t.target.dataset.fallbackSet="true",t.target.src=this.fallbackImg,t.target.onerror=null}},watch:{messages(){this.$nextTick(()=>{this.scrollToBottom()})}}},h=t=>(N("data-v-b63b1e00"),t=t(),z(),t),j={class:"chat-realtime-container"},R={class:"chat-header"},L=h(()=>s("i",{class:"bx bx-arrow-back"},null,-1)),G=[L],V={class:"header-avatar"},H=["src","alt"],O={key:1,class:"avatar-placeholder"},Q=h(()=>s("i",{class:"bx bx-user"},null,-1)),W=[Q],Z={key:2,class:"online-indicator"},F={class:"header-text"},K={class:"header-name"},Y={class:"header-status"},J={key:0,class:"status-online"},X={key:1,class:"status-offline"},q={class:"header-actions"},$=h(()=>s("i",{class:"bx bx-phone"},null,-1)),tt=[$],et=h(()=>s("i",{class:"bx bx-video"},null,-1)),st=[et],nt=h(()=>s("i",{class:"bx bx-dots-vertical-rounded"},null,-1)),it=[nt],at={key:0,class:"product-info-bar"},ot=["src","alt"],rt={class:"product-details"},lt={class:"product-title"},ct={class:"product-price"},dt=h(()=>s("i",{class:"bx bx-show"},null,-1)),ht={key:0,class:"loading-messages"},ut=h(()=>s("div",{class:"loading-spinner"},null,-1)),gt=h(()=>s("p",null,"Äang táº£i tin nháº¯n...",-1)),_t=[ut,gt],mt={key:1,class:"empty-messages"},pt=h(()=>s("div",{class:"empty-icon"},"ðŸ’¬",-1)),ft=h(()=>s("h3",null,"ChÆ°a cÃ³ tin nháº¯n nÃ o",-1)),It={key:2,class:"messages-list"},yt={key:0,class:"product-card-container"},vt={class:"product-card"},bt=h(()=>s("div",{class:"product-card-header"},[s("i",{class:"bx bx-package"}),s("span",null,"Sáº£n pháº©m Ä‘ang quan tÃ¢m")],-1)),kt={class:"product-card-image"},xt=["src","alt"],wt=h(()=>s("div",{class:"product-card-overlay"},[s("i",{class:"bx bx-show"}),s("span",null,"Xem chi tiáº¿t")],-1)),Mt={class:"product-card-content"},Tt={class:"product-card-title"},At={class:"product-card-price"},St=h(()=>s("div",{class:"product-card-footer"},[s("span",{class:"product-card-link"},[s("i",{class:"bx bx-link-external"}),M(" Má»Ÿ trang sáº£n pháº©m ")])],-1)),Ct={class:"message-content-wrapper"},Ut={key:0,class:"message-avatar"},Et=["src","alt"],Dt={key:1,class:"avatar-placeholder-small"},Pt=h(()=>s("i",{class:"bx bx-user"},null,-1)),Nt=[Pt],zt={class:"message-bubble-wrapper"},Bt=["src","alt","onClick"],jt={key:1,class:"message-file"},Rt=h(()=>s("i",{class:"bx bx-file"},null,-1)),Lt={class:"file-info"},Gt={class:"file-name"},Vt={class:"file-size"},Ht=["href"],Ot=h(()=>s("i",{class:"bx bx-download"},null,-1)),Qt=[Ot],Wt={key:2,class:"message-text"},Zt=["innerHTML"],Ft={class:"message-footer"},Kt={class:"message-time"},Yt={key:1,class:"typing-indicator-wrapper"},Jt={class:"message-avatar"},Xt=["src","alt"],qt={key:1,class:"avatar-placeholder-small"},$t=h(()=>s("i",{class:"bx bx-user"},null,-1)),te=[$t],ee=h(()=>s("div",{class:"typing-indicator"},[s("span"),s("span"),s("span")],-1)),se={class:"input-area"},ne={class:"input-wrapper"},ie=h(()=>s("i",{class:"bx bx-paperclip"},null,-1)),ae=[ie],oe=h(()=>s("i",{class:"bx bx-smile"},null,-1)),re=[oe],le=["disabled","title"],ce={key:0,class:"bx bx-send"},de={key:1,class:"bx bx-send",style:{color:"#16a34a"}},he={key:0,class:"attachment-menu"},ue=h(()=>s("i",{class:"bx bx-image"},null,-1)),ge=h(()=>s("span",null,"áº¢nh",-1)),_e=[ue,ge],me=h(()=>s("i",{class:"bx bx-file"},null,-1)),pe=h(()=>s("span",null,"Tá»‡p tin",-1)),fe=[me,pe],Ie=h(()=>s("i",{class:"bx bx-package"},null,-1)),ye=h(()=>s("span",null,"Sáº£n pháº©m",-1)),ve=[Ie,ye],be={key:1,class:"emoji-picker"},ke={class:"emoji-grid"},xe=["onClick"],we=h(()=>s("i",{class:"bx bx-x"},null,-1)),Me=[we],Te=["src"];function Ae(t,e,d,o,i,a){const r=U("router-link");return c(),l("div",j,[s("div",R,[s("button",{class:"btn-back",onClick:e[0]||(e[0]=n=>t.$router.push("/listchat")),title:"Quay láº¡i danh sÃ¡ch chat"},G),s("div",{class:"header-info",onClick:e[2]||(e[2]=(...n)=>a.viewProfile&&a.viewProfile(...n))},[s("div",V,[i.chatUser.avatar?(c(),l("img",{key:0,src:i.chatUser.avatar,alt:i.chatUser.name,onError:e[1]||(e[1]=(...n)=>a.onAvatarError&&a.onAvatarError(...n))},null,40,H)):(c(),l("div",O,W)),i.chatUser.is_online?(c(),l("span",Z)):_("",!0)]),s("div",F,[s("h3",K,g(i.chatUser.name||"NgÆ°á»i dÃ¹ng"),1),s("p",Y,[i.chatUser.is_online?(c(),l("span",J,"Äang hoáº¡t Ä‘á»™ng")):(c(),l("span",X," Hoáº¡t Ä‘á»™ng "+g(a.formatLastSeen(i.chatUser.last_seen)),1))])])]),s("div",q,[s("button",{class:"btn-header-action",onClick:e[3]||(e[3]=(...n)=>a.handleCall&&a.handleCall(...n)),title:"Gá»i Ä‘iá»‡n"},tt),s("button",{class:"btn-header-action",onClick:e[4]||(e[4]=(...n)=>a.handleVideoCall&&a.handleVideoCall(...n)),title:"Gá»i video"},st),s("button",{class:"btn-header-action",onClick:e[5]||(e[5]=(...n)=>a.toggleMenu&&a.toggleMenu(...n)),title:"TÃ¹y chá»n"},it)])]),i.productInfo?(c(),l("div",at,[s("img",{src:i.productInfo.image,alt:i.productInfo.title,class:"product-thumb"},null,8,ot),s("div",rt,[s("h4",lt,g(i.productInfo.title),1),s("p",ct,g(a.formatPrice(i.productInfo.price)),1)]),v(r,{to:`/san-pham/${i.productInfo.id}`,class:"btn-view-product"},{default:b(()=>[dt,M(" Xem sáº£n pháº©m ")]),_:1},8,["to"])])):_("",!0),s("div",{ref:"messagesContainer",class:"messages-container",onScroll:e[8]||(e[8]=(...n)=>a.handleScroll&&a.handleScroll(...n))},[i.loading&&i.messages.length===0?(c(),l("div",ht,_t)):i.messages.length===0?(c(),l("div",mt,[pt,ft,s("p",null,"Báº¯t Ä‘áº§u cuá»™c trÃ² chuyá»‡n vá»›i "+g(i.chatUser.name),1)])):(c(),l("div",It,[i.productInfo?(c(),l("div",yt,[s("div",vt,[bt,v(r,{to:`/san-pham/${i.productInfo.id}`,class:"product-card-body",onClick:e[7]||(e[7]=p(()=>{},["stop"]))},{default:b(()=>[s("div",kt,[s("img",{src:i.productInfo.image||i.fallbackImg,alt:i.productInfo.title,onError:e[6]||(e[6]=(...n)=>a.onProductImgError&&a.onProductImgError(...n))},null,40,xt),wt]),s("div",Mt,[s("h4",Tt,g(i.productInfo.title),1),s("p",At,g(a.formatPrice(i.productInfo.price)),1),St])]),_:1},8,["to"])])])):_("",!0),(c(!0),l(k,null,x(i.messages,(n,m)=>(c(),l("div",{key:n.id||m,class:I(["message-wrapper",{"message-sent":n.sender_id===i.currentUserId,"message-received":n.sender_id!==i.currentUserId}])},[s("div",Ct,[n.sender_id!==i.currentUserId&&a.shouldShowAvatar(n,m)?(c(),l("div",Ut,[i.chatUser.avatar?(c(),l("img",{key:0,src:i.chatUser.avatar,alt:i.chatUser.name},null,8,Et)):(c(),l("div",Dt,Nt))])):_("",!0),s("div",zt,[s("div",{class:I(["message-bubble",{"bubble-sent":n.sender_id===i.currentUserId,"bubble-received":n.sender_id!==i.currentUserId}])},[n.type==="image"?(c(),l("img",{key:0,src:n.content,alt:n.caption,class:"message-image",onClick:u=>a.previewImage(n.content)},null,8,Bt)):n.type==="file"?(c(),l("div",jt,[Rt,s("div",Lt,[s("p",Gt,g(n.file_name),1),s("p",Vt,g(a.formatFileSize(n.file_size)),1)]),s("a",{href:n.content,download:"",class:"btn-download"},Qt,8,Ht)])):(c(),l("div",Wt,[s("p",{innerHTML:a.formatMessage(n.content)},null,8,Zt)])),s("div",Ft,[s("span",Kt,g(a.formatMessageTime(n.created_at)),1),n.sender_id===i.currentUserId?(c(),l("i",{key:0,class:I(["message-status",{"bx-check":n.status==="sent","bx-check-double":n.status==="delivered","bx-check-double":n.status==="read"&&n.is_read}]),style:P(n.status==="read"&&n.is_read?"color: #4a90e2;":"")},null,6)):_("",!0)])],2)])])],2))),128)),i.isTyping?(c(),l("div",Yt,[s("div",Jt,[i.chatUser.avatar?(c(),l("img",{key:0,src:i.chatUser.avatar,alt:i.chatUser.name},null,8,Xt)):(c(),l("div",qt,te))]),ee])):_("",!0)]))],544),s("div",se,[s("div",ne,[s("button",{class:"btn-attachment",onClick:e[9]||(e[9]=(...n)=>a.toggleAttachmentMenu&&a.toggleAttachmentMenu(...n)),title:"ÄÃ­nh kÃ¨m"},ae),s("button",{class:"btn-emoji",onClick:e[10]||(e[10]=(...n)=>a.toggleEmojiPicker&&a.toggleEmojiPicker(...n)),title:"Emoji"},re),E(s("textarea",{ref:"messageInput","onUpdate:modelValue":e[11]||(e[11]=n=>i.messageText=n),onInput:e[12]||(e[12]=(...n)=>a.handleTyping&&a.handleTyping(...n)),onKeydown:[e[13]||(e[13]=w(p((...n)=>a.handleEnterKey&&a.handleEnterKey(...n),["exact"]),["enter"])),e[14]||(e[14]=w(p((...n)=>a.handleShiftEnter&&a.handleShiftEnter(...n),["shift","exact"]),["enter"]))],type:"text",placeholder:"Nháº­p tin nháº¯n...",class:"message-input",rows:"1"},null,544),[[D,i.messageText]]),s("button",{class:"btn-send",disabled:!a.canSend,onClick:e[15]||(e[15]=(...n)=>a.sendMessage&&a.sendMessage(...n)),title:a.canSend?"Gá»­i tin nháº¯n":"Nháº­p tin nháº¯n Ä‘á»ƒ gá»­i"},[a.canSend?(c(),l("i",de)):(c(),l("i",ce))],8,le)]),i.showAttachmentMenu?(c(),l("div",he,[s("button",{class:"attachment-item",onClick:e[16]||(e[16]=(...n)=>a.handleImageUpload&&a.handleImageUpload(...n))},_e),s("button",{class:"attachment-item",onClick:e[17]||(e[17]=(...n)=>a.handleFileUpload&&a.handleFileUpload(...n))},fe),s("button",{class:"attachment-item",onClick:e[18]||(e[18]=(...n)=>a.handleProductShare&&a.handleProductShare(...n))},ve)])):_("",!0),i.showEmojiPicker?(c(),l("div",be,[s("div",ke,[(c(!0),l(k,null,x(i.commonEmojis,n=>(c(),l("span",{key:n,class:"emoji-item",onClick:m=>a.insertEmoji(n)},g(n),9,xe))),128))])])):_("",!0)]),i.previewImageUrl?(c(),l("div",{key:1,class:"image-preview-modal",onClick:e[21]||(e[21]=(...n)=>a.closeImagePreview&&a.closeImagePreview(...n))},[s("div",{class:"preview-content",onClick:e[20]||(e[20]=p(()=>{},["stop"]))},[s("button",{class:"btn-close-preview",onClick:e[19]||(e[19]=(...n)=>a.closeImagePreview&&a.closeImagePreview(...n))},Me),s("img",{src:i.previewImageUrl,alt:"Preview"},null,8,Te)])])):_("",!0)])}const Ce=A(B,[["render",Ae],["__scopeId","data-v-b63b1e00"]]);export{Ce as default};
