import{_ as I,a as m,c as d,b as t,w as v,j as b,z as y,F as f,r as M,E as D,t as o,n as h,h as _,g as u,o as r,p as w,k as T,f as C}from"./index-01669123.js";const x={name:"BuyerOrders",data(){return{isLoading:!1,orders:[],selectedOrder:null,searchText:"",filterStatus:"all",fallbackImg:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDYwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI2MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0zMDAgMTYwQzM0NS4yMjkgMTYwIDM4MiAxMjMuMjI5IDM4MiA3OEMzODIgMzIuNzcwOSAzNDUuMjI5IDYgMzAwIDZDMjU0Ljc3MCA2IDIxOCAzMi43NzA5IDIxOCA3OEMyMTggMTIzLjIyOSAyNTQuNzcwIDE2MCAzMDAgMTYwWiIgZmlsbD0iIzlDQTNBRiIvPgo8cGF0aCBkPSJNMzAwIDI0MEMyNTAgMjQwIDIxMCAyNTYgMTg1IDI4MEg0MTVDMzkwIDI1NiAzNTAgMjQwIDMwMCAyNDBaIiBmaWxsPSIjOUNBM0FGIi8+Cjx0ZXh0IHg9IjMwMCIgeT0iMzIwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5Q0EzQUYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4=",API_BASE_URL:"/api/client"}},computed:{filteredOrders(){let e=[...this.orders];if(this.searchText.trim()){const n=this.searchText.toLowerCase();e=e.filter(c=>c.order_code.toLowerCase().includes(n)||c.product_name.toLowerCase().includes(n))}return this.filterStatus!=="all"&&(e=e.filter(n=>n.status===this.filterStatus)),e}},mounted(){this.fetchOrders()},methods:{async fetchOrders(){var e;this.isLoading=!0;try{const n=localStorage.getItem("key_client"),c=await m.get(`${this.API_BASE_URL}/don-hang-mua`,{headers:{Authorization:`Bearer ${n}`}});(e=c==null?void 0:c.data)!=null&&e.status&&(this.orders=c.data.data||[])}catch(n){console.error("Error fetching orders:",n),this.$toast?this.$toast.error("KhÃ´ng thá»ƒ táº£i danh sÃ¡ch Ä‘Æ¡n hÃ ng"):alert("KhÃ´ng thá»ƒ táº£i danh sÃ¡ch Ä‘Æ¡n hÃ ng"),this.orders=[]}finally{this.isLoading=!1}},async confirmReceived(e){var n,c,g;if(confirm(`XÃ¡c nháº­n báº¡n Ä‘Ã£ nháº­n Ä‘Æ°á»£c hÃ ng cho Ä‘Æ¡n hÃ ng ${e.order_code}?`))try{const i=localStorage.getItem("key_client"),s=await m.post(`${this.API_BASE_URL}/don-hang/${e.id}/xac-nhan-nhan-hang`,{},{headers:{Authorization:`Bearer ${i}`}});(n=s==null?void 0:s.data)!=null&&n.status&&(e.status="completed",this.$toast?this.$toast.success("ÄÃ£ xÃ¡c nháº­n nháº­n hÃ ng thÃ nh cÃ´ng!"):alert("ÄÃ£ xÃ¡c nháº­n nháº­n hÃ ng thÃ nh cÃ´ng!"),await this.fetchOrders())}catch(i){const s=((g=(c=i==null?void 0:i.response)==null?void 0:c.data)==null?void 0:g.message)||"KhÃ´ng thá»ƒ xÃ¡c nháº­n nháº­n hÃ ng";this.$toast?this.$toast.error(s):alert(s)}},viewDetail(e){this.selectedOrder=e},closeDetail(){this.selectedOrder=null},getStatusClass(e){return{pending:"status-pending",processing:"status-processing",shipped:"status-shipped",delivered:"status-delivered",completed:"status-completed",cancelled:"status-cancelled"}[e]||"status-default"},getStatusLabel(e){return{pending:"Chá» xá»­ lÃ½",processing:"Äang xá»­ lÃ½",shipped:"ÄÃ£ giao hÃ ng",delivered:"ÄÃ£ Ä‘áº¿n nÆ¡i",completed:"HoÃ n thÃ nh",cancelled:"ÄÃ£ há»§y"}[e]||e},getPaymentClass(e){return{pending:"status-pending",awaiting_payment:"status-pending",paid:"status-paid",completed:"status-completed",failed:"status-cancelled"}[e]||"status-default"},getPaymentLabel(e){return{pending:"Chá» thanh toÃ¡n",awaiting_payment:"Chá» thanh toÃ¡n",paid:"ÄÃ£ thanh toÃ¡n",completed:"HoÃ n thÃ nh",failed:"Tháº¥t báº¡i"}[e]||e},getPaymentMethodLabel(e){return{vnpay:"VNPay",momo:"MoMo",cash:"Tiá»n máº·t"}[e]||e},formatPrice(e){return(Number(e)||0).toLocaleString("vi-VN")+" â‚«"},formatDateTime(e){return e?new Date(e).toLocaleString("vi-VN"):""},onImgError(e){e.target.src=this.fallbackImg}}},l=e=>(w("data-v-a7bb02e6"),e=e(),T(),e),A={class:"orders-container"},N=l(()=>t("h1",{class:"page-title"},"ğŸ›’ ÄÆ N HÃ€NG Cá»¦A TÃ”I",-1)),S={class:"filters-section"},O={class:"filter-group"},k=l(()=>t("label",null,"ğŸ” TÃ¬m kiáº¿m:",-1)),L={class:"filter-group"},P=l(()=>t("label",null,"ğŸ“Š Tráº¡ng thÃ¡i:",-1)),z=C('<option value="all" data-v-a7bb02e6>Táº¥t cáº£</option><option value="pending" data-v-a7bb02e6>Chá» xá»­ lÃ½</option><option value="processing" data-v-a7bb02e6>Äang xá»­ lÃ½</option><option value="shipped" data-v-a7bb02e6>ÄÃ£ giao hÃ ng</option><option value="delivered" data-v-a7bb02e6>ÄÃ£ Ä‘áº¿n nÆ¡i</option><option value="completed" data-v-a7bb02e6>HoÃ n thÃ nh</option><option value="cancelled" data-v-a7bb02e6>ÄÃ£ há»§y</option>',7),j=[z],B={key:0,class:"loading-section"},E=l(()=>t("div",{class:"loading-spinner"},null,-1)),Z=l(()=>t("p",null,"Äang táº£i Ä‘Æ¡n hÃ ng...",-1)),G=[E,Z],H={key:1,class:"empty-state"},W=l(()=>t("div",{class:"empty-icon"},"ğŸ“­",-1)),Q=l(()=>t("p",null,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o.",-1)),R=[W,Q],Y={key:2,class:"orders-list"},U={class:"order-header"},V={class:"order-code"},X={class:"order-date"},J={class:"order-body"},F={class:"product-section"},K=["src","alt"],q={class:"product-info"},$={class:"product-name"},tt={class:"product-details"},et=l(()=>t("span",{class:"separator"},"|",-1)),st={class:"total-amount"},nt={class:"payment-info"},at=l(()=>t("span",null,"Thanh toÃ¡n: ",-1)),it=l(()=>t("span",{class:"separator"},"|",-1)),lt={key:0,class:"shipping-address"},ot={class:"order-footer"},ct={class:"order-actions"},dt=["onClick"],rt=["onClick"],ht={class:"modal-box"},_t=l(()=>t("h2",null,"Chi tiáº¿t Ä‘Æ¡n hÃ ng",-1)),ut={class:"detail-section"},gt=l(()=>t("h3",null,"ğŸ“‹ ThÃ´ng tin Ä‘Æ¡n hÃ ng",-1)),pt={class:"detail-grid"},mt={class:"detail-item"},vt=l(()=>t("label",null,"MÃ£ Ä‘Æ¡n:",-1)),It={class:"detail-item"},bt=l(()=>t("label",null,"NgÃ y Ä‘áº·t:",-1)),yt={class:"detail-item"},ft=l(()=>t("label",null,"Tráº¡ng thÃ¡i:",-1)),Mt={class:"detail-item"},Dt=l(()=>t("label",null,"Thanh toÃ¡n:",-1)),wt={class:"detail-section"},Tt=l(()=>t("h3",null,"ğŸ“¦ ThÃ´ng tin sáº£n pháº©m",-1)),Ct={class:"product-detail-card"},xt=["src","alt"],At={class:"product-detail-info"},Nt={class:"total-price"},St={key:0,class:"detail-section"},Ot=l(()=>t("h3",null,"ğŸ“ Äá»‹a chá»‰ giao hÃ ng",-1));function kt(e,n,c,g,i,s){return r(),d("div",A,[N,t("div",S,[t("div",O,[k,v(t("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>i.searchText=a),type:"text",placeholder:"TÃ¬m theo mÃ£ Ä‘Æ¡n, tÃªn sáº£n pháº©m...",class:"search-input"},null,512),[[b,i.searchText]])]),t("div",L,[P,v(t("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>i.filterStatus=a),class:"select-input"},j,512),[[y,i.filterStatus]])])]),i.isLoading?(r(),d("div",B,G)):s.filteredOrders.length?(r(),d("div",Y,[(r(!0),d(f,null,M(s.filteredOrders,a=>(r(),d("div",{key:a.id,class:"order-card"},[t("div",U,[t("div",V,[t("strong",null,"MÃ£ Ä‘Æ¡n: "+o(a.order_code),1),t("span",{class:h(["status-badge",s.getStatusClass(a.status)])},o(s.getStatusLabel(a.status)),3)]),t("div",X," Äáº·t ngÃ y: "+o(s.formatDateTime(a.created_at)),1)]),t("div",J,[t("div",F,[t("img",{src:a.product_image||i.fallbackImg,alt:a.product_name,class:"product-img",onError:n[2]||(n[2]=p=>s.onImgError(p))},null,40,K),t("div",q,[t("h3",$,o(a.product_name),1),t("div",tt,[t("span",null,[_("Sá»‘ lÆ°á»£ng: "),t("strong",null,o(a.quantity),1)]),et,t("span",null,[_("Tá»•ng tiá»n: "),t("strong",st,o(s.formatPrice(a.total_amount)),1)])]),t("div",nt,[at,t("span",{class:h(["payment-badge",s.getPaymentClass(a.payment_status)])},o(s.getPaymentLabel(a.payment_status)),3),it,t("span",null,"PhÆ°Æ¡ng thá»©c: "+o(s.getPaymentMethodLabel(a.payment_method)),1)]),a.shipping_address?(r(),d("div",lt," ğŸ“ Äá»‹a chá»‰ giao hÃ ng: "+o(a.shipping_address),1)):u("",!0)])])]),t("div",ot,[t("div",ct,[a.status==="delivered"||a.status==="shipped"?(r(),d("button",{key:0,class:"btn-confirm",onClick:p=>s.confirmReceived(a)}," âœ“ XÃ¡c nháº­n Ä‘Ã£ nháº­n hÃ ng ",8,dt)):u("",!0),t("button",{class:"btn-view-detail",onClick:p=>s.viewDetail(a)}," ğŸ‘ï¸ Xem chi tiáº¿t ",8,rt)])])]))),128))])):(r(),d("div",H,R)),i.selectedOrder?(r(),d("div",{key:3,class:"modal-overlay",onClick:n[5]||(n[5]=D((...a)=>s.closeDetail&&s.closeDetail(...a),["self"]))},[t("div",ht,[t("button",{class:"close-btn",onClick:n[3]||(n[3]=(...a)=>s.closeDetail&&s.closeDetail(...a))},"âœ–"),_t,t("div",ut,[gt,t("div",pt,[t("div",mt,[vt,t("span",null,o(i.selectedOrder.order_code),1)]),t("div",It,[bt,t("span",null,o(s.formatDateTime(i.selectedOrder.created_at)),1)]),t("div",yt,[ft,t("span",{class:h(["status-badge",s.getStatusClass(i.selectedOrder.status)])},o(s.getStatusLabel(i.selectedOrder.status)),3)]),t("div",Mt,[Dt,t("span",{class:h(["payment-badge",s.getPaymentClass(i.selectedOrder.payment_status)])},o(s.getPaymentLabel(i.selectedOrder.payment_status)),3)])])]),t("div",wt,[Tt,t("div",Ct,[t("img",{src:i.selectedOrder.product_image||i.fallbackImg,alt:i.selectedOrder.product_name,class:"product-detail-img",onError:n[4]||(n[4]=a=>s.onImgError(a))},null,40,xt),t("div",At,[t("h4",null,o(i.selectedOrder.product_name),1),t("p",null,[_("Sá»‘ lÆ°á»£ng: "),t("strong",null,o(i.selectedOrder.quantity),1)]),t("p",Nt,[_("Tá»•ng tiá»n: "),t("strong",null,o(s.formatPrice(i.selectedOrder.total_amount)),1)])])])]),i.selectedOrder.shipping_address?(r(),d("div",St,[Ot,t("p",null,o(i.selectedOrder.shipping_address),1)])):u("",!0)])])):u("",!0)])}const Pt=I(x,[["render",kt],["__scopeId","data-v-a7bb02e6"]]);export{Pt as default};
