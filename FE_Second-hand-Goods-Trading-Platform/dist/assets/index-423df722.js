import{_ as I,a as g,c as d,b as t,w as p,j as b,z as m,F as M,r as D,E as T,t as o,n as v,g as h,h as y,o as r,p as w,k as C,f}from"./index-01669123.js";const k={name:"SellerOrders",data(){return{isLoading:!1,orders:[],selectedOrder:null,searchText:"",filterStatus:"all",filterPayment:"all",fallbackImg:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDYwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI2MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0zMDAgMTYwQzM0NS4yMjkgMTYwIDM4MiAxMjMuMjI5IDM4MiA3OEMzODIgMzIuNzcwOSAzNDUuMjI5IDYgMzAwIDZDMjU0Ljc3MCA2IDIxOCAzMi43NzA5IDIxOCA3OEMyMTggMTIzLjIyOSAyNTQuNzcwIDE2MCAzMDAgMTYwWiIgZmlsbD0iIzlDQTNBRiIvPgo8cGF0aCBkPSJNMzAwIDI0MEMyNTAgMjQwIDIxMCAyNTYgMTg1IDI4MEg0MTVDMzkwIDI1NiAzNTAgMjQwIDMwMCAyNDBaIiBmaWxsPSIjOUNBM0FGIi8+Cjx0ZXh0IHg9IjMwMCIgeT0iMzIwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5Q0EzQUYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4=",API_BASE_URL:"/api/client"}},computed:{filteredOrders(){let e=[...this.orders];if(this.searchText.trim()){const n=this.searchText.toLowerCase();e=e.filter(c=>c.order_code.toLowerCase().includes(n)||c.buyer_name.toLowerCase().includes(n)||c.product_name.toLowerCase().includes(n))}return this.filterStatus!=="all"&&(e=e.filter(n=>n.status===this.filterStatus)),this.filterPayment!=="all"&&(e=e.filter(n=>n.payment_status===this.filterPayment)),e}},mounted(){this.fetchOrders()},methods:{async fetchOrders(){var e;this.isLoading=!0;try{const n=localStorage.getItem("key_client"),c=await g.get(`${this.API_BASE_URL}/don-hang-ban`,{headers:{Authorization:`Bearer ${n}`}});(e=c==null?void 0:c.data)!=null&&e.status&&(this.orders=c.data.data||[])}catch(n){console.error("Error fetching orders:",n),this.$toast?this.$toast.error("Kh√¥ng th·ªÉ t·∫£i danh s√°ch ƒë∆°n h√†ng"):alert("Kh√¥ng th·ªÉ t·∫£i danh s√°ch ƒë∆°n h√†ng"),this.orders=[]}finally{this.isLoading=!1}},async updateStatus(e){var n,c,u;try{const s=localStorage.getItem("key_client"),a=await g.put(`${this.API_BASE_URL}/don-hang/${e.id}/trang-thai`,{status:e.status},{headers:{Authorization:`Bearer ${s}`}});(n=a==null?void 0:a.data)!=null&&n.status&&this.$toast&&this.$toast.success("C·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng")}catch(s){const a=((u=(c=s==null?void 0:s.response)==null?void 0:c.data)==null?void 0:u.message)||"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i";this.$toast?this.$toast.error(a):alert(a),await this.fetchOrders()}},async markAsPaid(e){var n,c,u;if(confirm(`X√°c nh·∫≠n ƒë√£ thanh to√°n cho ƒë∆°n h√†ng ${e.order_code}?`))try{const s=localStorage.getItem("key_client"),a=await g.put(`${this.API_BASE_URL}/don-hang/${e.id}/thanh-toan`,{payment_status:"paid"},{headers:{Authorization:`Bearer ${s}`}});(n=a==null?void 0:a.data)!=null&&n.status&&(e.payment_status="paid",this.$toast&&this.$toast.success("ƒê√£ ƒë√°nh d·∫•u ƒë√£ thanh to√°n"))}catch(s){const a=((u=(c=s==null?void 0:s.response)==null?void 0:c.data)==null?void 0:u.message)||"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i thanh to√°n";this.$toast?this.$toast.error(a):alert(a)}},viewDetail(e){this.selectedOrder=e},closeDetail(){this.selectedOrder=null},getStatusClass(e){return{pending:"status-pending",processing:"status-processing",shipped:"status-shipped",delivered:"status-delivered",completed:"status-completed",cancelled:"status-cancelled"}[e]||"status-default"},getStatusLabel(e){return{pending:"Ch·ªù x·ª≠ l√Ω",processing:"ƒêang x·ª≠ l√Ω",shipped:"ƒê√£ giao h√†ng",delivered:"ƒê√£ ƒë·∫øn n∆°i",completed:"Ho√†n th√†nh",cancelled:"ƒê√£ h·ªßy"}[e]||e},getPaymentClass(e){return{pending:"status-pending",awaiting_payment:"status-pending",paid:"status-paid",completed:"status-completed",failed:"status-cancelled"}[e]||"status-default"},getPaymentLabel(e){return{pending:"Ch·ªù thanh to√°n",awaiting_payment:"Ch·ªù thanh to√°n",paid:"ƒê√£ thanh to√°n",completed:"Ho√†n th√†nh",failed:"Th·∫•t b·∫°i"}[e]||e},formatPrice(e){return(Number(e)||0).toLocaleString("vi-VN")+" ‚Ç´"},formatDate(e){return e?new Date(e).toLocaleDateString("vi-VN"):""},formatTime(e){return e?new Date(e).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}):""},formatDateTime(e){return e?new Date(e).toLocaleString("vi-VN"):""},onImgError(e){e.target.src=this.fallbackImg}}},i=e=>(w("data-v-796f35e3"),e=e(),C(),e),S={class:"orders-container"},A=i(()=>t("h1",{class:"page-title"},"üì¶ QU·∫¢N L√ù ƒê∆†N H√ÄNG",-1)),N={class:"filters-section"},O={class:"filter-group"},x=i(()=>t("label",null,"üîé T√¨m ki·∫øm:",-1)),P={class:"filter-group"},L=i(()=>t("label",null,"üìä Tr·∫°ng th√°i:",-1)),z=f('<option value="all" data-v-796f35e3>T·∫•t c·∫£</option><option value="pending" data-v-796f35e3>Ch·ªù x·ª≠ l√Ω</option><option value="processing" data-v-796f35e3>ƒêang x·ª≠ l√Ω</option><option value="shipped" data-v-796f35e3>ƒê√£ giao h√†ng</option><option value="delivered" data-v-796f35e3>ƒê√£ ƒë·∫øn n∆°i</option><option value="completed" data-v-796f35e3>Ho√†n th√†nh</option><option value="cancelled" data-v-796f35e3>ƒê√£ h·ªßy</option>',7),E=[z],j={class:"filter-group"},B=i(()=>t("label",null,"üí∞ Thanh to√°n:",-1)),H=i(()=>t("option",{value:"all"},"T·∫•t c·∫£",-1)),U=i(()=>t("option",{value:"pending"},"Ch·ªù thanh to√°n",-1)),Z=i(()=>t("option",{value:"paid"},"ƒê√£ thanh to√°n",-1)),V=[H,U,Z],G={key:0,class:"loading-section"},Q=i(()=>t("div",{class:"loading-spinner"},null,-1)),W=i(()=>t("p",null,"ƒêang t·∫£i ƒë∆°n h√†ng...",-1)),Y=[Q,W],R={key:1,class:"empty-state"},X=i(()=>t("div",{class:"empty-icon"},"üì≠",-1)),J=i(()=>t("p",null,"Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.",-1)),F=[X,J],K={key:2,class:"table-container"},q={class:"orders-table"},$=i(()=>t("thead",null,[t("tr",null,[t("th",null,"M√£ ƒë∆°n"),t("th",null,"S·∫£n ph·∫©m"),t("th",null,"Ng∆∞·ªùi mua"),t("th",null,"S·ªë l∆∞·ª£ng"),t("th",null,"T·ªïng ti·ªÅn"),t("th",null,"Thanh to√°n"),t("th",null,"Tr·∫°ng th√°i"),t("th",null,"Ng√†y ƒë·∫∑t"),t("th",{class:"text-center"},"Thao t√°c")])],-1)),tt={class:"code-cell"},et={class:"product-cell"},st={class:"product-info"},nt=["src","alt"],at={class:"product-name"},lt={class:"buyer-cell"},it={class:"buyer-info"},ot={class:"buyer-name"},ct={key:0,class:"buyer-detail"},dt={key:1,class:"buyer-detail"},rt={class:"quantity-cell text-center"},ht={class:"total-cell"},ut={class:"payment-cell"},_t=["onClick"],pt={class:"status-cell"},gt=["onUpdate:modelValue","onChange"],mt=f('<option value="pending" data-v-796f35e3>Ch·ªù x·ª≠ l√Ω</option><option value="processing" data-v-796f35e3>ƒêang x·ª≠ l√Ω</option><option value="shipped" data-v-796f35e3>ƒê√£ giao h√†ng</option><option value="delivered" data-v-796f35e3>ƒê√£ ƒë·∫øn n∆°i</option><option value="completed" data-v-796f35e3>Ho√†n th√†nh</option><option value="cancelled" data-v-796f35e3>ƒê√£ h·ªßy</option>',6),vt=[mt],yt={class:"date-cell"},ft={class:"date-text"},It={class:"time-text"},bt={class:"actions-cell text-center"},Mt=["onClick"],Dt={class:"modal-box"},Tt=i(()=>t("h2",null,"Chi ti·∫øt ƒë∆°n h√†ng",-1)),wt={class:"detail-section"},Ct=i(()=>t("h3",null,"üìã Th√¥ng tin ƒë∆°n h√†ng",-1)),kt={class:"detail-grid"},St={class:"detail-item"},At=i(()=>t("label",null,"M√£ ƒë∆°n:",-1)),Nt={class:"detail-item"},Ot=i(()=>t("label",null,"Ng√†y ƒë·∫∑t:",-1)),xt={class:"detail-item"},Pt=i(()=>t("label",null,"Tr·∫°ng th√°i:",-1)),Lt={class:"detail-item"},zt=i(()=>t("label",null,"Thanh to√°n:",-1)),Et={class:"detail-section"},jt=i(()=>t("h3",null,"üë§ Th√¥ng tin ng∆∞·ªùi mua",-1)),Bt={class:"detail-grid"},Ht={class:"detail-item"},Ut=i(()=>t("label",null,"H·ªç t√™n:",-1)),Zt={key:0,class:"detail-item"},Vt=i(()=>t("label",null,"S·ªë ƒëi·ªán tho·∫°i:",-1)),Gt={key:1,class:"detail-item"},Qt=i(()=>t("label",null,"Email:",-1)),Wt={key:2,class:"detail-item"},Yt=i(()=>t("label",null,"ƒê·ªãa ch·ªâ:",-1)),Rt={class:"detail-section"},Xt=i(()=>t("h3",null,"üì¶ Th√¥ng tin s·∫£n ph·∫©m",-1)),Jt={class:"product-detail-card"},Ft=["src","alt"],Kt={class:"product-detail-info"},qt={class:"total-price"};function $t(e,n,c,u,s,a){return r(),d("div",S,[A,t("div",N,[t("div",O,[x,p(t("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>s.searchText=l),type:"text",placeholder:"T√¨m theo m√£ ƒë∆°n, t√™n ng∆∞·ªùi mua...",class:"search-input"},null,512),[[b,s.searchText]])]),t("div",P,[L,p(t("select",{"onUpdate:modelValue":n[1]||(n[1]=l=>s.filterStatus=l),class:"select-input"},E,512),[[m,s.filterStatus]])]),t("div",j,[B,p(t("select",{"onUpdate:modelValue":n[2]||(n[2]=l=>s.filterPayment=l),class:"select-input"},V,512),[[m,s.filterPayment]])])]),s.isLoading?(r(),d("div",G,Y)):a.filteredOrders.length?(r(),d("div",K,[t("table",q,[$,t("tbody",null,[(r(!0),d(M,null,D(a.filteredOrders,l=>(r(),d("tr",{key:l.id},[t("td",tt,[t("strong",null,o(l.order_code),1)]),t("td",et,[t("div",st,[t("img",{src:l.product_image||s.fallbackImg,alt:l.product_name,class:"product-thumb",onError:n[3]||(n[3]=_=>a.onImgError(_))},null,40,nt),t("span",at,o(l.product_name),1)])]),t("td",lt,[t("div",it,[t("div",ot,o(l.buyer_name),1),l.buyer_phone?(r(),d("div",ct,"üìû "+o(l.buyer_phone),1)):h("",!0),l.buyer_email?(r(),d("div",dt,"‚úâÔ∏è "+o(l.buyer_email),1)):h("",!0)])]),t("td",rt,[t("strong",null,o(l.quantity),1)]),t("td",ht,[t("strong",null,o(a.formatPrice(l.total_amount)),1)]),t("td",ut,[t("span",{class:v(["status-badge",a.getPaymentClass(l.payment_status)])},o(a.getPaymentLabel(l.payment_status)),3),l.payment_status!=="paid"?(r(),d("button",{key:0,class:"btn-mark-paid",onClick:_=>a.markAsPaid(l),title:"ƒê√°nh d·∫•u ƒë√£ thanh to√°n"}," ‚úì ",8,_t)):h("",!0)]),t("td",pt,[p(t("select",{"onUpdate:modelValue":_=>l.status=_,class:"status-select",onChange:_=>a.updateStatus(l)},vt,40,gt),[[m,l.status]])]),t("td",yt,[t("div",ft,o(a.formatDate(l.created_at)),1),t("small",It,o(a.formatTime(l.created_at)),1)]),t("td",bt,[t("button",{class:"btn-view-detail",onClick:_=>a.viewDetail(l),title:"Xem chi ti·∫øt"}," üëÅÔ∏è ",8,Mt)])]))),128))])])])):(r(),d("div",R,F)),s.selectedOrder?(r(),d("div",{key:3,class:"modal-overlay",onClick:n[6]||(n[6]=T((...l)=>a.closeDetail&&a.closeDetail(...l),["self"]))},[t("div",Dt,[t("button",{class:"close-btn",onClick:n[4]||(n[4]=(...l)=>a.closeDetail&&a.closeDetail(...l))},"‚úñ"),Tt,t("div",wt,[Ct,t("div",kt,[t("div",St,[At,t("span",null,o(s.selectedOrder.order_code),1)]),t("div",Nt,[Ot,t("span",null,o(a.formatDateTime(s.selectedOrder.created_at)),1)]),t("div",xt,[Pt,t("span",{class:v(["status-badge",a.getStatusClass(s.selectedOrder.status)])},o(a.getStatusLabel(s.selectedOrder.status)),3)]),t("div",Lt,[zt,t("span",{class:v(["status-badge",a.getPaymentClass(s.selectedOrder.payment_status)])},o(a.getPaymentLabel(s.selectedOrder.payment_status)),3)])])]),t("div",Et,[jt,t("div",Bt,[t("div",Ht,[Ut,t("span",null,o(s.selectedOrder.buyer_name),1)]),s.selectedOrder.buyer_phone?(r(),d("div",Zt,[Vt,t("span",null,o(s.selectedOrder.buyer_phone),1)])):h("",!0),s.selectedOrder.buyer_email?(r(),d("div",Gt,[Qt,t("span",null,o(s.selectedOrder.buyer_email),1)])):h("",!0),s.selectedOrder.buyer_address?(r(),d("div",Wt,[Yt,t("span",null,o(s.selectedOrder.buyer_address),1)])):h("",!0)])]),t("div",Rt,[Xt,t("div",Jt,[t("img",{src:s.selectedOrder.product_image||s.fallbackImg,alt:s.selectedOrder.product_name,class:"product-detail-img",onError:n[5]||(n[5]=l=>a.onImgError(l))},null,40,Ft),t("div",Kt,[t("h4",null,o(s.selectedOrder.product_name),1),t("p",null,[y("S·ªë l∆∞·ª£ng: "),t("strong",null,o(s.selectedOrder.quantity),1)]),t("p",qt,[y("T·ªïng ti·ªÅn: "),t("strong",null,o(a.formatPrice(s.selectedOrder.total_amount)),1)])])])])])])):h("",!0)])}const ee=I(k,[["render",$t],["__scopeId","data-v-796f35e3"]]);export{ee as default};
