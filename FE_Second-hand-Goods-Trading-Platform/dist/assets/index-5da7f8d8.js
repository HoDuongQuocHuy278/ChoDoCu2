import{_ as v,a as c,c as d,b as t,h as f,F as b,r as k,t as r,E as y,w as m,j as g,H as C,g as x,o as h,n as M,p as w,k as E}from"./index-01669123.js";import{a as u}from"./config-162ba8a8.js";const I={name:"AdminCategories",data(){return{categories:[],showModal:!1,isEditing:!1,form:{id:null,ten_danh_muc:"",hinh_anh:"",is_active:!0}}},mounted(){this.fetchCategories()},methods:{async fetchCategories(){try{const s=localStorage.getItem("token"),o=await c.get(`${u}/categories`,{headers:{Authorization:`Bearer ${s}`}});o.data.status&&(this.categories=o.data.data)}catch(s){console.error("Error fetching categories:",s)}},openModal(s=null){s?(this.isEditing=!0,this.form={...s,is_active:!!s.is_active}):(this.isEditing=!1,this.form={id:null,ten_danh_muc:"",hinh_anh:"",is_active:!0}),this.showModal=!0},closeModal(){this.showModal=!1},async saveCategory(){try{const s=localStorage.getItem("token");this.isEditing?await c.put(`${u}/categories/${this.form.id}`,this.form,{headers:{Authorization:`Bearer ${s}`}}):await c.post(`${u}/categories`,this.form,{headers:{Authorization:`Bearer ${s}`}}),this.closeModal(),this.fetchCategories(),alert(this.isEditing?"Cập nhật thành công":"Thêm mới thành công")}catch(s){console.error("Error saving category:",s),alert("Lỗi khi lưu danh mục")}},async deleteCategory(s){var o,_;if(confirm("Bạn có chắc muốn xóa danh mục này?"))try{const l=localStorage.getItem("token");await c.delete(`${u}/categories/${s.id}`,{headers:{Authorization:`Bearer ${l}`}}),this.fetchCategories(),alert("Xóa danh mục thành công")}catch(l){console.error("Error deleting category:",l),alert(((_=(o=l.response)==null?void 0:o.data)==null?void 0:_.message)||"Lỗi khi xóa danh mục")}}}},a=s=>(w("data-v-61ffa920"),s=s(),E(),s),S={class:"categories-page"},B=a(()=>t("h2",{class:"page-title"},"Quản lý danh mục",-1)),T={class:"toolbar"},A=a(()=>t("i",{class:"fas fa-plus"},null,-1)),H={class:"table-container"},L={class:"data-table"},V=a(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Hình ảnh"),t("th",null,"Tên danh mục"),t("th",null,"Slug"),t("th",null,"Trạng thái"),t("th",null,"Hành động")])],-1)),z=["src"],D={class:"actions"},N=["onClick"],U=a(()=>t("i",{class:"fas fa-edit"},null,-1)),F=[U],X=["onClick"],j=a(()=>t("i",{class:"fas fa-trash"},null,-1)),q=[j],P={key:0,class:"modal-overlay"},Q={class:"modal-content"},R={class:"form-group"},$=a(()=>t("label",null,"Tên danh mục",-1)),G={class:"form-group"},J=a(()=>t("label",null,"Link hình ảnh",-1)),K={class:"form-group checkbox"},O={class:"modal-actions"},W=a(()=>t("button",{type:"submit",class:"btn btn-primary"},"Lưu",-1));function Y(s,o,_,l,n,i){return h(),d("div",S,[B,t("div",T,[t("button",{onClick:o[0]||(o[0]=e=>i.openModal()),class:"btn btn-primary"},[A,f(" Thêm danh mục ")])]),t("div",H,[t("table",L,[V,t("tbody",null,[(h(!0),d(b,null,k(n.categories,e=>(h(),d("tr",{key:e.id},[t("td",null,r(e.id),1),t("td",null,[t("img",{src:e.hinh_anh||"https://via.placeholder.com/50",alt:"Category",class:"category-img"},null,8,z)]),t("td",null,r(e.ten_danh_muc),1),t("td",null,r(e.slug),1),t("td",null,[t("span",{class:M(["status-badge",e.is_active?"active":"inactive"])},r(e.is_active?"Hiển thị":"Ẩn"),3)]),t("td",D,[t("button",{onClick:p=>i.openModal(e),class:"btn-icon",title:"Sửa"},F,8,N),t("button",{onClick:p=>i.deleteCategory(e),class:"btn-icon delete",title:"Xóa"},q,8,X)])]))),128))])])]),n.showModal?(h(),d("div",P,[t("div",Q,[t("h3",null,r(n.isEditing?"Cập nhật danh mục":"Thêm danh mục mới"),1),t("form",{onSubmit:o[5]||(o[5]=y((...e)=>i.saveCategory&&i.saveCategory(...e),["prevent"]))},[t("div",R,[$,m(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>n.form.ten_danh_muc=e),required:"",class:"form-control"},null,512),[[g,n.form.ten_danh_muc]])]),t("div",G,[J,m(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>n.form.hinh_anh=e),class:"form-control"},null,512),[[g,n.form.hinh_anh]])]),t("div",K,[t("label",null,[m(t("input",{type:"checkbox","onUpdate:modelValue":o[3]||(o[3]=e=>n.form.is_active=e)},null,512),[[C,n.form.is_active]]),f(" Hiển thị ")])]),t("div",O,[t("button",{type:"button",onClick:o[4]||(o[4]=(...e)=>i.closeModal&&i.closeModal(...e)),class:"btn btn-secondary"},"Hủy"),W])],32)])])):x("",!0)])}const et=v(I,[["render",Y],["__scopeId","data-v-61ffa920"]]);export{et as default};
