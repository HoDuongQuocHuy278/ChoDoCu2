import{_ as Ft,u as Jt,l as Xt,m as E,C as X,q as Vt,x as yt,s as Zt,y as Wt,c as i,b as t,t as a,F as H,r as Z,h as d,d as et,e as nt,g as w,n as M,w as R,j as O,B as kt,v as xt,f as Qt,a as st,o as c,D as te,p as ee,k as ne}from"./index-01669123.js";import{b as Pt}from"./banks-df9823be.js";import{f as at}from"./imageHelper-6b936e79.js";import"./config-162ba8a8.js";const e=_t=>(ee("data-v-997749e2"),_t=_t(),ne(),_t),se={class:"checkout-page"},ae={key:0},oe={key:0,class:"loading-container"},le=e(()=>t("div",{class:"text-center py-5"},[t("div",{class:"spinner-border text-success mb-3",role:"status",style:{width:"3rem",height:"3rem"}},[t("span",{class:"visually-hidden"},"Đang tải...")]),t("p",{class:"text-muted"},"Đang tải danh sách sản phẩm đã chọn...")],-1)),ie=[le],ce={key:1,class:"order-success-container"},re={class:"container py-5"},de={key:0,class:"success-card text-center"},he=e(()=>t("div",{class:"success-icon"},[t("i",{class:"bx bx-check-circle"})],-1)),_e={class:"success-title"},ue=e(()=>t("p",{class:"success-message"},"Cảm ơn bạn đã thanh toán nhiều sản phẩm tại Chợ Đồ Cũ",-1)),me={class:"cart-order-summary my-4"},be={class:"text-start"},pe={class:"text-muted small mb-0"},ve={class:"fw-semibold"},ge={class:"border-top pt-3 mt-3"},ye={class:"mb-1"},fe={class:"text-muted small mb-0"},ke={key:0,class:"cart-payment-followup mt-4"},xe=e(()=>t("h6",{class:"fw-semibold mb-3"},"Hoàn tất thanh toán online",-1)),we={class:"mb-3"},De={class:"text-muted small mb-1"},Te={class:"d-flex justify-content-between align-items-center"},Ce=e(()=>t("strong",{class:"fs-5"},"Tổng tiền cần thanh toán",-1)),Ie={class:"fw-bold fs-4 text-success"},Ne={key:0},qe=["href"],Se=e(()=>t("i",{class:"bx bx-credit-card me-1"},null,-1)),Me={class:"text-muted small mt-2 mb-0 text-center"},Ae=e(()=>t("i",{class:"bx bx-info-circle me-1"},null,-1)),Be={key:1,class:"d-flex flex-column flex-sm-row gap-3 align-items-center"},$e={key:0,class:"qr-block mb-3 text-center"},Ve=["src"],Pe={key:0,class:"bank-info-box p-2 bg-light rounded text-start d-inline-block"},Ue={class:"mb-1 small"},Re=e(()=>t("strong",null,"Ngân hàng:",-1)),Qe={class:"mb-1 small"},Ee=e(()=>t("strong",null,"STK:",-1)),Ke={class:"mb-0 small"},je=e(()=>t("strong",null,"Chủ TK:",-1)),Oe={class:"flex-grow-1 w-100"},Ye=["href"],Ge=e(()=>t("i",{class:"bx bx-mobile me-1"},null,-1)),Le={key:0,class:"alert alert-info soft mb-0"},ze=e(()=>t("p",{class:"text-muted small mt-2 mb-0 text-center"},[t("i",{class:"bx bx-info-circle me-1"}),d(" Quét QR hoặc mở app để thanh toán tổng hóa đơn ")],-1)),He={class:"alert alert-info soft"},Fe=e(()=>t("h6",{class:"fw-semibold mb-2"},"Danh sách đơn hàng trong hóa đơn:",-1)),Je={class:"mb-0 small"},Xe={class:"text-muted small mb-0 mt-3"},Ze={key:1,class:"alert alert-success soft mt-4"},We=e(()=>t("i",{class:"bx bx-money me-1"},null,-1)),tn={key:2,class:"error-container"},en={class:"container py-5"},nn={class:"alert alert-danger"},sn=e(()=>t("h5",null,"Không thể tải sản phẩm đã chọn",-1)),an={key:3,class:"container py-4 cart-checkout-wrapper"},on={class:"cart-hero card border-0 shadow-sm mb-4"},ln={class:"cart-hero-content d-flex flex-wrap gap-3 align-items-center"},cn=e(()=>t("div",{class:"cart-hero-icon"},[t("i",{class:"bx bx-cart"})],-1)),rn={class:"flex-grow-1"},dn=e(()=>t("p",{class:"cart-phase-label mb-1 text-uppercase small fw-semibold"},"Thanh toán nhiều sản phẩm",-1)),hn=e(()=>t("h2",{class:"fw-bold mb-1"},"Hoàn tất đơn hàng trong 3 bước",-1)),_n={class:"text-muted mb-0"},un=e(()=>t("i",{class:"bx bx-arrow-back me-1"},null,-1)),mn={class:"cart-progress mt-4"},bn=e(()=>t("div",{class:"step-circle"},[t("span",null,"1")],-1)),pn=e(()=>t("p",null,"Kiểm tra sản phẩm",-1)),vn=[bn,pn],gn=e(()=>t("div",{class:"step-circle"},[t("span",null,"2")],-1)),yn=e(()=>t("p",null,"Thông tin nhận hàng",-1)),fn=[gn,yn],kn=e(()=>t("div",{class:"step-circle"},[t("span",null,"3")],-1)),xn=e(()=>t("p",null,"Xác nhận đơn",-1)),wn=[kn,xn],Dn={class:"row g-4 align-items-start"},Tn={class:"col-xl-8"},Cn={key:0,class:"cart-step-panel card border-0 shadow-sm"},In=Qt('<div class="card-header bg-white border-0 d-flex justify-content-between align-items-center" data-v-997749e2><div data-v-997749e2><h5 class="mb-1 fw-bold" data-v-997749e2>Bước 1 · Kiểm tra sản phẩm</h5><p class="text-muted mb-0" data-v-997749e2>Đảm bảo các sản phẩm chính xác trước khi tiếp tục</p></div><span class="badge rounded-pill bg-success-subtle text-success px-3 py-2" data-v-997749e2><i class="bx bx-shield-quarter me-1" data-v-997749e2></i> Được kiểm duyệt </span></div>',1),Nn={class:"card-body cart-items-list"},qn={class:"cart-item-left d-flex gap-3 flex-grow-1"},Sn={class:"cart-item-thumb"},Mn=["src","alt"],An={class:"cart-item-info flex-grow-1"},Bn={class:"d-flex flex-wrap justify-content-between gap-2"},$n={class:"text-muted mb-1 small text-uppercase fw-semibold"},Vn={class:"fw-semibold mb-0"},Pn={class:"text-end"},Un=e(()=>t("p",{class:"text-muted small mb-1"},"Đơn giá",-1)),Rn={class:"fw-semibold mb-0 text-primary"},Qn={class:"cart-item-meta mt-3"},En={class:"meta-badge"},Kn=e(()=>t("i",{class:"bx bx-package me-1"},null,-1)),jn=e(()=>t("span",{class:"meta-badge"},[t("i",{class:"bx bx-store-alt me-1"}),d(" Giao COD trong 2-4 ngày ")],-1)),On={class:"cart-item-total text-md-end"},Yn=e(()=>t("p",{class:"text-muted mb-1 small"},"Thành tiền",-1)),Gn={class:"fw-bold fs-5 text-success mb-0"},Ln={key:0,class:"text-muted mb-0 text-center py-4"},zn={class:"step-actions d-flex justify-content-end gap-2 border-top pt-3 px-3 pb-3"},Hn=e(()=>t("i",{class:"bx bx-arrow-back me-1"},null,-1)),Fn=["disabled"],Jn={key:1,class:"cart-step-panel card border-0 shadow-sm"},Xn=e(()=>t("div",{class:"card-header bg-white border-0"},[t("h5",{class:"fw-bold mb-1"},"Bước 2 · Thông tin & thanh toán"),t("p",{class:"text-muted mb-0 small"},"Nhập thông tin nhận hàng và chọn phương thức thanh toán")],-1)),Zn={class:"card-body"},Wn={class:"row g-3"},ts={class:"col-md-6"},es=e(()=>t("label",{class:"form-label"},"Họ và tên *",-1)),ns={class:"input-icon"},ss=e(()=>t("i",{class:"bx bx-user"},null,-1)),as={key:0,class:"invalid-feedback"},os={class:"col-md-6"},ls=e(()=>t("label",{class:"form-label"},"Số điện thoại *",-1)),is={class:"input-icon"},cs=e(()=>t("i",{class:"bx bx-phone"},null,-1)),rs={key:0,class:"invalid-feedback"},ds={class:"col-md-6"},hs=e(()=>t("label",{class:"form-label"},"Email",-1)),_s={class:"input-icon"},us=e(()=>t("i",{class:"bx bx-envelope"},null,-1)),ms={class:"col-md-6"},bs=e(()=>t("label",{class:"form-label"},"Địa chỉ nhận hàng",-1)),ps={class:"input-icon"},vs=e(()=>t("i",{class:"bx bx-map"},null,-1)),gs={class:"col-12"},ys=e(()=>t("label",{class:"form-label"},"Ghi chú",-1)),fs={class:"cart-payment-group mt-4"},ks=e(()=>t("h6",{class:"fw-semibold mb-2"},"Phương thức thanh toán",-1)),xs=e(()=>t("p",{class:"text-muted small mb-3"},"Bạn có thể thanh toán online (VNPAY, MBBANK) hoặc COD.",-1)),ws={class:"payment-options"},Ds=["onClick"],Ts={class:"payment-option-content"},Cs={class:"d-flex align-items-center gap-2"},Is={class:"payment-option-title"},Ns={key:0,class:"badge bg-success-subtle text-success rounded-pill"},qs={class:"payment-option-desc text-muted mb-0"},Ss={key:0,class:"alert alert-success soft mt-3"},Ms=e(()=>t("i",{class:"bx bx-money me-1"},null,-1)),As={key:1,class:"alert alert-info soft mt-3"},Bs=e(()=>t("i",{class:"bx bx-info-circle me-1"},null,-1)),$s=e(()=>t("i",{class:"bx bx-chevron-left me-1"},null,-1)),Vs={key:2,class:"cart-step-panel card border-0 shadow-sm"},Ps=e(()=>t("div",{class:"card-header bg-white border-0"},[t("h5",{class:"fw-bold mb-1"},"Bước 3 · Kiểm tra & xác nhận"),t("p",{class:"text-muted mb-0 small"},"Hãy kiểm tra lại trước khi xác nhận thanh toán COD")],-1)),Us={class:"card-body"},Rs={class:"border rounded-4 p-3 mb-3 bg-light-subtle"},Qs=e(()=>t("h6",{class:"fw-semibold mb-3"},"Thông tin giao hàng",-1)),Es={class:"row mb-0 small"},Ks=e(()=>t("dt",{class:"col-sm-3 text-muted"},"Người nhận",-1)),js={class:"col-sm-9 fw-semibold"},Os=e(()=>t("dt",{class:"col-sm-3 text-muted"},"Số điện thoại",-1)),Ys={class:"col-sm-9 fw-semibold"},Gs=e(()=>t("dt",{class:"col-sm-3 text-muted"},"Địa chỉ",-1)),Ls={class:"col-sm-9"},zs=e(()=>t("dt",{class:"col-sm-3 text-muted"},"Ghi chú",-1)),Hs={class:"col-sm-9"},Fs={class:"cart-review-list"},Js=e(()=>t("h6",{class:"fw-semibold mb-3"},"Danh sách sản phẩm",-1)),Xs={class:"text-truncate pe-3"},Zs={class:"mb-1 fw-semibold"},Ws={class:"text-muted"},ta={class:"text-end"},ea=e(()=>t("p",{class:"text-muted mb-1 small"},"Thành tiền",-1)),na={class:"fw-semibold mb-0 text-success"},sa={key:0,class:"cart-online-payments mt-4"},aa=e(()=>t("h6",{class:"fw-semibold mb-2"},"Thanh toán online",-1)),oa={class:"text-muted small mb-3"},la={key:0,class:"payment-result-list"},ia={class:"mb-3"},ca={class:"text-muted small mb-1"},ra={class:"d-flex justify-content-between align-items-center"},da=e(()=>t("strong",{class:"fs-5"},"Tổng tiền",-1)),ha={class:"fw-bold fs-4 text-success"},_a={key:0},ua=["href"],ma=e(()=>t("i",{class:"bx bx-credit-card me-1"},null,-1)),ba=e(()=>t("p",{class:"text-muted small mb-0 mt-2 text-center"},"Link thanh toán cho tổng hóa đơn.",-1)),pa={key:1},va={key:0,class:"qr-block mb-3 text-center"},ga=["src"],ya={key:0,class:"bank-info-box p-2 bg-light rounded text-start d-inline-block"},fa={class:"mb-1 small"},ka=e(()=>t("strong",null,"Ngân hàng:",-1)),xa={class:"mb-1 small"},wa=e(()=>t("strong",null,"STK:",-1)),Da={class:"mb-0 small"},Ta=e(()=>t("strong",null,"Chủ TK:",-1)),Ca={class:"d-flex flex-column flex-sm-row gap-2"},Ia=["href"],Na=e(()=>t("i",{class:"bx bx-mobile me-1"},null,-1)),qa={key:1,class:"alert alert-info soft flex-grow-1 mb-0"},Sa={key:1,class:"alert alert-warning soft"},Ma=e(()=>t("i",{class:"bx bx-time-five me-1"},null,-1)),Aa={key:1,class:"alert alert-success soft mt-4"},Ba=e(()=>t("i",{class:"bx bx-money me-1"},null,-1)),$a={class:"step-actions d-flex justify-content-between gap-2 border-top pt-3 px-3 pb-3"},Va=e(()=>t("i",{class:"bx bx-chevron-left me-1"},null,-1)),Pa=["disabled"],Ua={key:0,class:"spinner-border spinner-border-sm me-2"},Ra={key:1},Qa=e(()=>t("i",{class:"bx bx-check me-1"},null,-1)),Ea={class:"col-xl-4"},Ka={class:"cart-summary-card card border-0 shadow-sm mb-4"},ja={class:"card-body"},Oa={class:"d-flex align-items-center justify-content-between mb-3"},Ya=e(()=>t("h5",{class:"fw-bold mb-0"},"Tổng quan thanh toán",-1)),Ga={class:"badge rounded-pill bg-primary-subtle text-primary text-uppercase"},La=e(()=>t("i",{class:"bx bx-bell me-1"},null,-1)),za={class:"summary-line"},Ha=e(()=>t("span",null,"Tạm tính",-1)),Fa={class:"fw-semibold"},Ja=e(()=>t("div",{class:"summary-line"},[t("span",null,"Phí vận chuyển"),t("span",{class:"text-success fw-semibold"},"Miễn phí")],-1)),Xa={class:"summary-line"},Za=e(()=>t("span",null,"Giảm giá",-1)),Wa={class:"text-danger"},to={class:"summary-total mt-3 border-top pt-3 d-flex justify-content-between align-items-center"},eo=e(()=>t("p",{class:"text-muted mb-1 small"},"Thành tiền",-1)),no={class:"mb-0 text-success"},so={class:"text-end"},ao={class:"text-muted mb-1 small"},oo={class:"text-muted small mb-0"},lo=e(()=>t("div",{class:"alert alert-info soft mt-3"},[t("i",{class:"bx bx-info-circle me-1"}),d(" Các đơn sẽ được phân tách theo từng sản phẩm để hệ thống xử lý nhanh chóng. ")],-1)),io=Qt('<div class="cart-info-card card border-0 shadow-sm" data-v-997749e2><div class="card-body" data-v-997749e2><div class="d-flex align-items-center gap-3 mb-3" data-v-997749e2><div class="cart-info-icon" data-v-997749e2><i class="bx bx-shield" data-v-997749e2></i></div><div data-v-997749e2><h6 class="fw-bold mb-1" data-v-997749e2>Chính sách bảo vệ</h6><p class="text-muted small mb-0" data-v-997749e2>Ưu tiên kiểm tra hàng trước khi thanh toán. Miễn phí đổi trả trong 48 giờ nếu không đúng mô tả.</p></div></div><ul class="list-unstyled cart-info-list text-muted small mb-0" data-v-997749e2><li data-v-997749e2><i class="bx bx-check-circle text-success me-1" data-v-997749e2></i> Theo dõi từng đơn trong mục Đơn mua</li><li data-v-997749e2><i class="bx bx-check-circle text-success me-1" data-v-997749e2></i> Chuẩn bị tiền mặt đủ khi nhận hàng</li><li data-v-997749e2><i class="bx bx-check-circle text-success me-1" data-v-997749e2></i> Hỗ trợ khách hàng 24/7</li></ul></div></div>',1),co={key:0,class:"loading-container"},ro=e(()=>t("div",{class:"text-center py-5"},[t("div",{class:"spinner-border text-success mb-3",role:"status",style:{width:"3rem",height:"3rem"}},[t("span",{class:"visually-hidden"},"Đang tải...")]),t("p",{class:"text-muted"},"Đang tải thông tin sản phẩm...")],-1)),ho=[ro],_o={key:1,class:"error-container"},uo={class:"container py-5"},mo={class:"alert alert-danger"},bo=e(()=>t("h5",null,"Không thể tải thông tin sản phẩm",-1)),po={key:2,class:"order-success-container"},vo={class:"container py-5"},go={class:"row justify-content-center"},yo={class:"col-lg-8"},fo={class:"success-card text-center"},ko=e(()=>t("div",{class:"success-icon"},[t("i",{class:"bx bx-check-circle"})],-1)),xo=e(()=>t("h2",{class:"success-title"},"Đặt hàng thành công!",-1)),wo=e(()=>t("p",{class:"success-message"},"Cảm ơn bạn đã mua sắm tại Chợ Đồ Cũ",-1)),Do={class:"order-details-card"},To={class:"order-header"},Co=e(()=>t("h5",null,"Thông tin đơn hàng",-1)),Io={class:"order-code"},No={class:"order-body"},qo={class:"order-item"},So={class:"order-item-image"},Mo=["src","alt"],Ao={class:"order-item-info"},Bo={class:"text-muted small"},$o={class:"order-item-price"},Vo={class:"order-footer"},Po={class:"order-summary"},Uo={class:"summary-row"},Ro=e(()=>t("span",null,"Tạm tính:",-1)),Qo=e(()=>t("div",{class:"summary-row"},[t("span",null,"Phí vận chuyển:"),t("span",null,"Miễn phí")],-1)),Eo={class:"summary-row total"},Ko=e(()=>t("span",null,"Tổng tiền:",-1)),jo={class:"payment-info"},Oo=e(()=>t("strong",null,"Phương thức thanh toán:",-1)),Yo={class:"text-muted small"},Go={key:0,class:"payment-action mt-3"},Lo=["href"],zo=e(()=>t("i",{class:"bx bx-credit-card"},null,-1)),Ho=e(()=>t("p",{class:"text-muted small mt-2"},"Hoặc quét QR code bên dưới",-1)),Fo={key:1,class:"payment-action mt-3"},Jo={key:0,class:"text-center py-3"},Xo=e(()=>t("div",{class:"spinner-border text-primary mb-2",role:"status"},[t("span",{class:"visually-hidden"},"Đang tạo giao dịch...")],-1)),Zo=e(()=>t("p",{class:"text-muted"},"Đang tạo giao dịch MBBank...",-1)),Wo=[Xo,Zo],tl={key:1,class:"mbbank-payment-info"},el={key:0,class:"mb-3"},nl=e(()=>t("p",{class:"text-center"},[t("strong",null,"Quét QR code để thanh toán:")],-1)),sl={class:"text-center"},al=["src"],ol={key:1,class:"mb-3"},ll=["href"],il=e(()=>t("i",{class:"bx bx-mobile"},null,-1)),cl={key:2,class:"alert alert-info"},rl=e(()=>t("strong",null,"Mã giao dịch:",-1)),dl=e(()=>t("strong",null,"Trạng thái:",-1)),hl={key:2,class:"alert alert-warning"},_l=e(()=>t("p",{class:"mb-2"},"Chưa tạo được giao dịch thanh toán.",-1)),ul=["disabled"],ml=e(()=>t("i",{class:"bx bx-refresh"},null,-1)),bl={class:"success-actions"},pl=e(()=>t("i",{class:"bx bx-home"},null,-1)),vl=e(()=>t("i",{class:"bx bx-show"},null,-1)),gl={key:3,class:"checkout-form-container"},yl={class:"container py-4"},fl={class:"breadcrumb-nav mb-4"},kl={class:"breadcrumb"},xl={class:"breadcrumb-item"},wl={class:"breadcrumb-item"},Dl=e(()=>t("li",{class:"breadcrumb-item active"},"Thanh toán",-1)),Tl={class:"checkout-steps mb-4"},Cl=e(()=>t("div",{class:"step-number"},"1",-1)),Il=e(()=>t("div",{class:"step-label"},"Thông tin đơn hàng",-1)),Nl=[Cl,Il],ql=e(()=>t("div",{class:"step-connector"},null,-1)),Sl=e(()=>t("div",{class:"step-number"},"2",-1)),Ml=e(()=>t("div",{class:"step-label"},"Phương thức thanh toán",-1)),Al=[Sl,Ml],Bl=e(()=>t("div",{class:"step-connector"},null,-1)),$l=e(()=>t("div",{class:"step-number"},"3",-1)),Vl=e(()=>t("div",{class:"step-label"},"Xác nhận",-1)),Pl=[$l,Vl],Ul={class:"row g-4"},Rl={class:"col-lg-8"},Ql={class:"checkout-step"},El={class:"card shadow-sm"},Kl=e(()=>t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"bx bx-package"}),d(" Thông tin đơn hàng ")])],-1)),jl={class:"card-body"},Ol={class:"product-summary mb-4"},Yl={class:"d-flex align-items-center gap-3"},Gl=["src","alt"],Ll={class:"flex-grow-1"},zl={class:"mb-1"},Hl={class:"text-muted small mb-2"},Fl={class:"d-flex align-items-center gap-3"},Jl={class:"text-success fw-bold"},Xl={class:"quantity-selector"},Zl=["disabled"],Wl={class:"text-end"},ti=e(()=>t("p",{class:"text-muted small mb-1"},"Tổng tiền",-1)),ei={class:"text-success mb-0"},ni=e(()=>t("hr",null,null,-1)),si=e(()=>t("h6",{class:"mb-3"},[t("i",{class:"bx bx-user"}),d(" Thông tin người mua ")],-1)),ai={class:"row g-3"},oi={class:"col-md-6"},li=e(()=>t("label",{class:"form-label"},[d("Họ và tên "),t("span",{class:"text-danger"},"*")],-1)),ii={key:0,class:"invalid-feedback"},ci={class:"col-md-6"},ri=e(()=>t("label",{class:"form-label"},[d("Số điện thoại "),t("span",{class:"text-danger"},"*")],-1)),di={key:0,class:"invalid-feedback"},hi={class:"col-md-6"},_i=e(()=>t("label",{class:"form-label"},"Email",-1)),ui={key:0,class:"invalid-feedback"},mi={class:"col-md-6"},bi=e(()=>t("label",{class:"form-label"},"Địa chỉ nhận hàng",-1)),pi={class:"col-12"},vi=e(()=>t("label",{class:"form-label"},"Ghi chú cho người bán",-1)),gi={class:"checkout-step"},yi={class:"card shadow-sm"},fi=e(()=>t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"bx bx-credit-card"}),d(" Phương thức thanh toán "),t("span",{class:"badge bg-success-subtle text-success ms-2"},"Bảo mật 100%")])],-1)),ki={class:"card-body"},xi={class:"payment-options"},wi=["onClick"],Di=["value"],Ti={class:"payment-option-content"},Ci={class:"payment-option-title"},Ii={class:"payment-option-desc"},Ni={key:0,class:"payment-option-badge"},qi={class:"payment-instruction mt-4 p-3 bg-light rounded"},Si=e(()=>t("i",{class:"bx bx-info-circle text-primary"},null,-1)),Mi={class:"ms-2"},Ai={class:"checkout-step"},Bi={class:"card shadow-sm"},$i=e(()=>t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"bx bx-check-circle"}),d(" Xác nhận đơn hàng ")])],-1)),Vi={class:"card-body"},Pi={class:"order-review"},Ui={class:"review-section"},Ri=e(()=>t("h6",null,"Thông tin sản phẩm",-1)),Qi={class:"d-flex align-items-center gap-3 mb-3"},Ei=["src","alt"],Ki={class:"flex-grow-1"},ji={class:"mb-1"},Oi={class:"text-muted small mb-0"},Yi={class:"text-end"},Gi={class:"text-success"},Li=e(()=>t("hr",null,null,-1)),zi={class:"review-section"},Hi=e(()=>t("h6",null,"Thông tin người mua",-1)),Fi={class:"review-info"},Ji=e(()=>t("strong",null,"Họ tên:",-1)),Xi={key:0},Zi=e(()=>t("strong",null,"Số điện thoại:",-1)),Wi={key:1},tc=e(()=>t("strong",null,"Email:",-1)),ec={key:2},nc=e(()=>t("strong",null,"Địa chỉ:",-1)),sc={key:3},ac=e(()=>t("strong",null,"Ghi chú:",-1)),oc=e(()=>t("hr",null,null,-1)),lc={class:"review-section"},ic=e(()=>t("h6",null,"Phương thức thanh toán",-1)),cc={class:"d-flex align-items-center gap-2"},rc=e(()=>t("hr",null,null,-1)),dc={class:"review-section"},hc={class:"order-total"},_c={class:"total-row"},uc=e(()=>t("span",null,"Tạm tính:",-1)),mc=e(()=>t("div",{class:"total-row"},[t("span",null,"Phí vận chuyển:"),t("span",null,"Miễn phí")],-1)),bc={class:"total-row final"},pc=e(()=>t("span",null,"Tổng tiền:",-1)),vc={class:"col-lg-4"},gc={class:"order-summary-card sticky-top"},yc={class:"card shadow-sm"},fc=e(()=>t("div",{class:"card-header"},[t("h5",{class:"mb-0"},"Tóm tắt đơn hàng")],-1)),kc={class:"card-body"},xc={class:"summary-item"},wc=["src","alt"],Dc={class:"summary-item-info"},Tc={class:"summary-item-name"},Cc={class:"text-muted small"},Ic=e(()=>t("hr",null,null,-1)),Nc={class:"summary-totals"},qc={class:"summary-row"},Sc=e(()=>t("span",null,"Đơn giá:",-1)),Mc={class:"summary-row"},Ac=e(()=>t("span",null,"Số lượng:",-1)),Bc=e(()=>t("div",{class:"summary-row"},[t("span",null,"Phí vận chuyển:"),t("span",{class:"text-success"},"Miễn phí")],-1)),$c=e(()=>t("hr",null,null,-1)),Vc={class:"summary-row total"},Pc=e(()=>t("span",null,"Tổng tiền:",-1)),Uc={class:"total-amount"},Rc={class:"card-footer"},Qc=["disabled"],Ec=e(()=>t("i",{class:"bx bx-chevron-right"},null,-1)),Kc=e(()=>t("i",{class:"bx bx-chevron-right"},null,-1)),jc=["disabled"],Oc={key:0,class:"spinner-border spinner-border-sm me-2"},Yc={key:1},Gc=e(()=>t("i",{class:"bx bx-check"},null,-1)),Lc={class:"step-navigation mt-3"},zc=e(()=>t("i",{class:"bx bx-chevron-left"},null,-1)),Ut="cart_selected_items",Rt="fe_marketplace_cart",Hc={__name:"index",setup(_t){const K=Jt(),wt=Xt(),G="/api/client",h=E(null),W=E(!0),V=E(""),b=E(null),L=E(!1),A=E(1),q=E([]),F=E([]),J=E(!1),T=E(1),lt=E(null),B=E(null),ut=E(!1),mt=X(()=>{const o=q.value.reduce((l,r)=>l+Number(r.price)*Math.max(1,Number(r.quantity)||1),0);return{subtotal:o,shipping:0,discount:0,total:o}}),Et=X(()=>q.value.reduce((o,l)=>o+Math.max(1,Number(l.quantity)||1),0));X(()=>L.value&&s.payment_method!=="cash");const Dt=(o=K.query)=>o.cart_mode==="1"||o.from_cart==="1",s=Vt({buyer_name:"",buyer_email:"",buyer_phone:"",shipping_address:"",notes:"",quantity:Number(K.query.quantity||1)||1,payment_method:"vnpay"}),N=Vt({buyer_name:"",buyer_email:"",buyer_phone:""}),bt=[{value:"vnpay",label:"Ví VNPAY",desc:"Thanh toán online qua QR hoặc thẻ liên kết",icon:"bx bx-credit-card",badge:"Khuyến nghị"},{value:"mbbank",label:"VietQR",desc:"Thanh toán qua mã QR (Mọi ngân hàng)",icon:"bx bx-qr-scan",badge:"Khuyên dùng"},{value:"cash",label:"Tiền mặt (COD)",desc:"Thanh toán khi nhận hàng",icon:"bx bx-money",badge:"Tiện lợi"}],ft=X(()=>K.query.product_id||K.query.product||null),it=X(()=>h.value?Number(h.value.price||0)*Math.max(1,s.quantity):0);function ct(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDE2MCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNjAiIGhlaWdodD0iMTIwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCA0OEM4Ny45NTU4IDQ4IDk0IDQxLjk1NTggOTQgMzRDOTQgMjYuMDQ0MiA4Ny45NTU4IDIwIDgwIDIwQzcyLjA0NDIgMjAgNjYgMjYuMDQ0MiA2NiAzNEM2NiA0MS45NTU4IDcyLjA0NDIgNDggODAgNDhaIiBmaWxsPSIjOUNBM0FGIi8+CjxwYXRoIGQ9Ik04MCA3MkM2OCA3MiA1OCA3OCA1MCA4OEgxMTBDMTAyIDc4IDkyIDcyIDgwIDcyWiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4="}const ot=X(()=>{if(!h.value)return ct();if(h.value.image)return at(h.value.image);if(Array.isArray(h.value.images)&&h.value.images.length)return at(h.value.images[0]);if(h.value.hinh_anh)try{const o=typeof h.value.hinh_anh=="string"&&h.value.hinh_anh.trim().startsWith("[")?JSON.parse(h.value.hinh_anh):h.value.hinh_anh;if(Array.isArray(o)&&o.length>0)return at(o[0]);if(typeof o=="string"&&o)return at(o)}catch{if(typeof h.value.hinh_anh=="string"&&h.value.hinh_anh)return at(h.value.hinh_anh)}return ct()}),Kt=X(()=>{var o,l;if((l=(o=b.value)==null?void 0:o.san_pham)!=null&&l.hinh_anh)try{const r=b.value.san_pham.hinh_anh;let m=[];return Array.isArray(r)?m=r:typeof r=="string"&&(r.trim().startsWith("[")?m=JSON.parse(r):m=[r]),at(m[0])||ot.value}catch{return ot.value}return ot.value}),jt=X(()=>s.buyer_name.trim()&&s.buyer_phone.trim()),Tt=()=>{W.value=!0,V.value="";try{const o=localStorage.getItem(Ut);if(!o){V.value="Không tìm thấy sản phẩm đã chọn từ giỏ hàng. Vui lòng quay lại giỏ hàng và chọn sản phẩm.",q.value=[];return}const l=JSON.parse(o);if(!Array.isArray(l)||!l.length){V.value="Danh sách sản phẩm đã chọn không hợp lệ.",q.value=[];return}q.value=l.map(r=>({id:r.id,name:r.name||"Sản phẩm chưa đặt tên",price:Number(r.price)||0,quantity:Math.max(1,Number(r.quantity)||1),image:r.image||ct()})),s.payment_method="cash",A.value=1}catch(o){console.error("Không thể tải danh sách sản phẩm đã chọn",o),V.value="Không thể tải danh sách sản phẩm đã chọn. Vui lòng thử lại.",q.value=[]}finally{W.value=!1}},pt=async()=>{var o,l,r;if(!ft.value){V.value="Không tìm thấy sản phẩm để mua. Vui lòng chọn sản phẩm từ danh sách.",h.value=null,W.value=!1;return}W.value=!0,V.value="",b.value=null,T.value=1;try{const m=await st.get(`${G}/san-pham/${ft.value}`),g=((o=m.data)==null?void 0:o.data)||m.data;if(g&&g.id){console.log("Fetched Product Payload:",g),h.value=g;const f=localStorage.getItem("user_info");if(f)try{const _=JSON.parse(f);_.ho_va_ten&&(s.buyer_name=_.ho_va_ten),_.email&&(s.buyer_email=_.email),_.so_dien_thoai&&(s.buyer_phone=_.so_dien_thoai)}catch(_){console.warn("Không thể parse user info",_)}}else V.value="Không tìm thấy thông tin sản phẩm. Dữ liệu trả về không hợp lệ.",h.value=null}catch(m){console.error("Error loading product:",m),V.value=((r=(l=m==null?void 0:m.response)==null?void 0:l.data)==null?void 0:r.message)||(m==null?void 0:m.message)||"Không thể tải thông tin sản phẩm. Vui lòng thử lại.",h.value=null}finally{W.value=!1}},vt=()=>(N.buyer_name="",N.buyer_phone="",N.buyer_email="",s.buyer_name.trim()?s.buyer_phone.trim()?s.buyer_phone&&!/^[0-9]{10,11}$/.test(s.buyer_phone.replace(/\s/g,""))?(N.buyer_phone="Số điện thoại không hợp lệ",!1):s.buyer_email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.buyer_email)?(N.buyer_email="Email không hợp lệ",!1):!0:(N.buyer_phone="Vui lòng nhập số điện thoại",!1):(N.buyer_name="Vui lòng nhập họ tên",!1)),Ct=()=>{T.value===1?vt()&&(T.value=2,window.scrollTo({top:0,behavior:"smooth"})):T.value===2&&(T.value=3,window.scrollTo({top:0,behavior:"smooth"}))},Ot=()=>{T.value>1&&(T.value--,window.scrollTo({top:0,behavior:"smooth"}))},It=o=>{s.quantity=Math.min(Math.max(s.quantity+o,1),99)},gt=()=>{s.quantity=Math.min(Math.max(s.quantity||1,1),99)},Yt=async(o,l)=>{if(!o)throw new Error("Thiếu thông tin đơn hàng để tạo thanh toán");const r=localStorage.getItem("key_client"),m=r?{Authorization:`Bearer ${r}`}:{},g={order_id:o.id,amount:o.tong_tien,order_info:`Thanh toán đơn hàng #${o.ma_don_hang}`,customer_name:s.buyer_name,customer_email:s.buyer_email||null,customer_phone:s.buyer_phone||null},f=l==="vnpay"?`${G}/payment/vnpay`:`${G}/payment/mbbank`;console.log("Creating payment:",{endpoint:f,paymentPayload:g});const{data:_}=await st.post(f,g,{headers:m});if(console.log("Payment response:",_),!(_!=null&&_.status)||!(_!=null&&_.data))throw new Error((_==null?void 0:_.message)||"Phản hồi từ server không hợp lệ");const y={paymentUrl:null,paymentData:null};return l==="vnpay"?y.paymentUrl=_.data.payment_url||_.data:l==="mbbank"&&(y.paymentData=_.data,_.data.payment_url&&(y.paymentUrl=_.data.payment_url)),y},Gt=async(o,l,r)=>{if(!o||!Array.isArray(o)||o.length===0)throw new Error("Thiếu danh sách đơn hàng để tạo thanh toán");const m=localStorage.getItem("key_client"),g=m?{Authorization:`Bearer ${m}`}:{},f={order_ids:o,amount:l,order_info:`Thanh toán ${o.length} đơn hàng`,customer_name:s.buyer_name,customer_email:s.buyer_email||null,customer_phone:s.buyer_phone||null},_=r==="vnpay"?`${G}/payment/vnpay`:`${G}/payment/mbbank`;console.log("Creating cart payment:",{endpoint:_,paymentPayload:f});const{data:y}=await st.post(_,f,{headers:g});if(console.log("Cart payment response:",y),!(y!=null&&y.status)||!(y!=null&&y.data))throw new Error((y==null?void 0:y.message)||"Phản hồi từ server không hợp lệ");const $={paymentUrl:null,paymentData:null};return r==="vnpay"?$.paymentUrl=y.data.payment_url||y.data:r==="mbbank"&&($.paymentData=y.data,y.data.payment_url&&($.paymentUrl=y.data.payment_url)),$},Nt=(o,l,r,m,g)=>{if(!o||!l)return null;const f=Pt.find(U=>U.shortName===o||U.name===o),_=f?f.bin:"970422",y=l.replace(/[^a-zA-Z0-9]/g,""),$=encodeURIComponent(r||""),z=encodeURIComponent(g||"");return`https://img.vietqr.io/image/${_}-${y}-compact2.jpg?amount=${m}&addInfo=${z}&accountName=${$}`},qt=async o=>{var l,r;try{console.log(`Fetching bank info for seller ${o} from /public/users`);let m=await st.get(`${G}/public/users/${o}`);console.log("Public User Response:",m.data);let g=((l=m.data)==null?void 0:l.data)||m.data;if(!g||!g.ten_ngan_hang&&!g.bank_name&&!g.ngan_hang){const f=localStorage.getItem("key_client");if(f){console.log(`Retrying fetch for seller ${o} from /users (auth)`);try{m=await st.get(`${G}/users/${o}`,{headers:{Authorization:`Bearer ${f}`}}),console.log("Auth User Response:",m.data);const _=((r=m.data)==null?void 0:r.data)||m.data;_&&(g={...g,..._})}catch(_){console.warn("Auth fetch failed",_)}}}if(g){const f=g.ten_ngan_hang||g.bank_name||g.ngan_hang;if(f&&/^\d+$/.test(f)){const _=Pt.find(y=>y.bin===f);_&&(g.ten_ngan_hang=_.shortName)}}return g}catch(m){return console.warn("Không thể lấy thông tin ngân hàng người bán",m),null}},Lt=async(o,l)=>{var r,m,g,f,_,y,$,z,U,Q,n,D,p,k,I,j,v,Y,$t;if(!(!o||!b.value)){ut.value=!0;try{let P=null;if(l==="vnpay")try{P=await Yt(b.value,l),lt.value=P.paymentUrl}catch(x){throw console.error("Lỗi tạo thanh toán VNPAY",x),x}else if(l==="mbbank"){P={paymentData:{transaction_id:`QR_${b.value.ma_don_hang}`,qr_code:null}};let x=null;const S=((r=h.value)==null?void 0:r.seller)||{};if(console.log("Debug: Product Seller Info:",S),S.bank_name&&S.bank_number)x={name:S.bank_name,number:S.bank_number,owner:S.bank_owner||""};else if(S.ten_ngan_hang&&S.so_tai_khoan)x={name:S.ten_ngan_hang,number:S.so_tai_khoan,owner:S.chu_tai_khoan||""};else if(S.name&&S.number)x={name:S.name,number:S.number,owner:S.owner||""};else if((m=S.bank)!=null&&m.name&&((g=S.bank)!=null&&g.number))x={name:S.bank.name,number:S.bank.number,owner:S.bank.owner||""};else if((f=b.value)!=null&&f.seller_bank)x=b.value.seller_bank;else if((_=h.value)!=null&&_.user_id||(y=h.value)!=null&&y.nguoi_dang_id||($=h.value)!=null&&$.seller_id||(U=(z=h.value)==null?void 0:z.seller)!=null&&U.id||(n=(Q=h.value)==null?void 0:Q.nguoi_dang)!=null&&n.id){const ht=h.value.user_id||h.value.nguoi_dang_id||h.value.seller_id||((D=h.value.seller)==null?void 0:D.id)||((p=h.value.nguoi_dang)==null?void 0:p.id);if(console.log("Debug: Fetching info for sellerId:",ht),h.value.seller){const u=h.value.seller;u.ten_ngan_hang&&u.so_tai_khoan?x={name:u.ten_ngan_hang,number:u.so_tai_khoan,owner:u.chu_tai_khoan}:(k=u.bank)!=null&&k.name&&((I=u.bank)!=null&&I.number)&&(x={name:u.bank.name,number:u.bank.number,owner:u.bank.owner})}if(!x){const u=await qt(ht);if(console.log("Debug: Fetched Seller Info:",u),u&&(u.ten_ngan_hang&&u.so_tai_khoan?x={name:u.ten_ngan_hang,number:u.so_tai_khoan,owner:u.chu_tai_khoan}:u.bank_name&&u.bank_number?x={name:u.bank_name,number:u.bank_number,owner:u.bank_owner}:u.name&&u.number?x={name:u.name,number:u.number,owner:u.owner}:(j=u.bank)!=null&&j.name&&((v=u.bank)!=null&&v.number)?x={name:u.bank.name,number:u.bank.number,owner:u.bank.owner}:u.account_number&&u.bank_name?x={name:u.bank_name,number:u.account_number,owner:u.account_name||u.account_holder||""}:u.ngan_hang&&u.so_tk&&(x={name:u.ngan_hang,number:u.so_tk,owner:u.chu_tk||""}),!x&&typeof u.bank=="string"))try{const tt=JSON.parse(u.bank);tt.name&&tt.number&&(x={name:tt.name,number:tt.number,owner:tt.owner})}catch(tt){console.warn("Failed to parse bank info string",tt)}}}if(!x){console.warn("No seller bank info found."),window!=null&&window.$toast?window.$toast.error("Người bán chưa cập nhật thông tin ngân hàng. Vui lòng liên hệ người bán."):alert("Người bán chưa cập nhật thông tin ngân hàng. Vui lòng liên hệ người bán.");return}if(x&&x.name&&x.number){const ht=Nt(x.name,x.number,x.owner,b.value.tong_tien,`Thanh toan don hang ${b.value.ma_don_hang}`);P.paymentData?(P.paymentData.qr_code=ht,P.paymentData.payment_url=null,P.paymentData.bank_info=x):P.paymentData={qr_code:ht,transaction_id:((Y=P.paymentData)==null?void 0:Y.transaction_id)||(($t=P.paymentData)==null?void 0:$t.id),bank_info:x}}B.value=P.paymentData,P.paymentUrl&&(lt.value=P.paymentUrl)}}catch(P){console.error("Lỗi khi tạo payment:",P);const x=(P==null?void 0:P.message)||"Không thể tạo link thanh toán. Vui lòng thử lại.";window!=null&&window.$toast?window.$toast.error(x):alert(x)}finally{ut.value=!1}}},St=async()=>{var o,l,r,m,g,f,_,y;if(!q.value.length){V.value="Không có sản phẩm nào được chọn để thanh toán.";return}if(vt()){J.value=!0,V.value="",b.value=null,F.value=[];try{const $=localStorage.getItem("key_client"),z=$?{Authorization:`Bearer ${$}`}:{},U=[],Q=s.payment_method||"cash";for(const p of q.value){const k={product_id:p.id,quantity:Math.max(1,Number(p.quantity)||1),payment_method:Q==="mbbank"?"cash":Q,buyer_name:s.buyer_name,buyer_email:s.buyer_email||null,buyer_phone:s.buyer_phone||null,shipping_address:s.shipping_address||null,notes:s.notes||null},{data:I}=await st.post(`${G}/don-hang`,k,{headers:z}),j=(I==null?void 0:I.data)||I;U.push(j)}const n=U.reduce((p,k)=>p+Number((k==null?void 0:k.tong_tien)||0),0);let D=null;if(Q==="vnpay")try{const p=U.map(k=>k.id);D=await Gt(p,n,Q)}catch(p){throw console.error("Không thể tạo thanh toán cho tổng hóa đơn",p),p}else Q==="mbbank"&&(D={paymentData:{transaction_id:`QR_CART_${Date.now()}`}});if(Q==="mbbank"&&D){let p=null;const k=q.value[0];if(k){const I=k.seller||{};if(I.ten_ngan_hang&&I.so_tai_khoan)p={name:I.ten_ngan_hang,number:I.so_tai_khoan,owner:I.chu_tai_khoan};else if(k.user_id||k.nguoi_dang_id||k.seller_id||(o=k.seller)!=null&&o.id||(l=k.nguoi_dang)!=null&&l.id){const j=k.user_id||k.nguoi_dang_id||k.seller_id||((r=k.seller)==null?void 0:r.id)||((m=k.nguoi_dang)==null?void 0:m.id),v=await qt(j);if(v&&(console.log("Cart Checkout - Fetched Seller Info:",v),v.ten_ngan_hang&&v.so_tai_khoan?p={name:v.ten_ngan_hang,number:v.so_tai_khoan,owner:v.chu_tai_khoan}:v.name&&v.number?p={name:v.name,number:v.number,owner:v.owner}:(g=v.bank)!=null&&g.name&&((f=v.bank)!=null&&f.number)?p={name:v.bank.name,number:v.bank.number,owner:v.bank.owner}:v.account_number&&v.bank_name?p={name:v.bank_name,number:v.account_number,owner:v.account_name||v.account_holder||""}:v.ngan_hang&&v.so_tk&&(p={name:v.ngan_hang,number:v.so_tk,owner:v.chu_tk||""}),!p&&typeof v.bank=="string"))try{const Y=JSON.parse(v.bank);Y.name&&Y.number&&(p={name:Y.name,number:Y.number,owner:Y.owner})}catch(Y){console.warn("Failed to parse bank info string",Y)}}}if(!p){console.warn("No seller bank info found for cart."),window!=null&&window.$toast?window.$toast.error("Người bán chưa cập nhật thông tin ngân hàng. Vui lòng liên hệ người bán."):alert("Người bán chưa cập nhật thông tin ngân hàng. Vui lòng liên hệ người bán.");return}if(p&&p.name&&p.number){const I=Nt(p.name,p.number,p.owner,n,`Thanh toan ${U.length} don hang`);D.paymentData||(D.paymentData={}),D.paymentData.qr_code=I,D.paymentData.payment_url=null,D.paymentData.bank_info=p}}b.value={cart_mode:!0,orders:U,total_amount:n,payment_method:Q},D&&(F.value=[{orders:U,paymentUrl:D.paymentUrl,paymentData:D.paymentData}]),A.value=3;try{const k=JSON.parse(localStorage.getItem(Rt)||"[]").filter(I=>!q.value.some(j=>j.id===I.id));localStorage.setItem(Rt,JSON.stringify(k)),localStorage.removeItem(Ut),window.dispatchEvent(new CustomEvent("cart-updated"))}catch(p){console.warn("Không thể cập nhật giỏ hàng sau khi thanh toán",p)}window.scrollTo({top:0,behavior:"smooth"})}catch($){console.error($),V.value=((y=(_=$==null?void 0:$.response)==null?void 0:_.data)==null?void 0:y.message)||"Không thể tạo đơn hàng cho các sản phẩm đã chọn."}finally{J.value=!1}}},zt=async()=>{var o,l;if(L.value){await St();return}if(!vt()){T.value=1;return}if(!h.value){V.value="Không tìm thấy sản phẩm.";return}J.value=!0,V.value="",lt.value=null,B.value=null;try{const r={product_id:h.value.id,quantity:s.quantity,payment_method:s.payment_method,buyer_name:s.buyer_name,buyer_email:s.buyer_email||null,buyer_phone:s.buyer_phone||null,shipping_address:s.shipping_address||null,notes:s.notes||null},m=localStorage.getItem("key_client"),g=m?{Authorization:`Bearer ${m}`}:{},{data:f}=await st.post(`${G}/don-hang`,r,{headers:g});b.value=(f==null?void 0:f.data)||f,(s.payment_method==="vnpay"||s.payment_method==="mbbank")&&await Lt(b.value.id,s.payment_method),window.scrollTo({top:0,behavior:"smooth"})}catch(r){console.error(r),V.value=((l=(o=r==null?void 0:r.response)==null?void 0:o.data)==null?void 0:l.message)||"Không thể tạo đơn hàng. Vui lòng thử lại.",T.value=1}finally{J.value=!1}},Mt=o=>{switch(o){case"vnpay":return"Sau khi xác nhận, hệ thống sẽ gửi mã QR/Link VNPAY để bạn hoàn tất thanh toán.";case"mbbank":return"Quét mã VietQR để chuyển khoản trực tiếp cho người bán. Nội dung chuyển khoản sẽ được điền tự động.";default:return"Thanh toán trực tiếp cho người giao hàng hoặc người bán khi nhận sản phẩm."}},rt=o=>{var l;return((l=bt.find(r=>r.value===o))==null?void 0:l.label)||o},Ht=o=>{var l;return((l=bt.find(r=>r.value===o))==null?void 0:l.icon)||"bx bx-credit-card"},C=o=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(o||0),dt=o=>{if(o.target.dataset.fallbackSet==="true"){o.target.style.display="none";return}o.target.dataset.fallbackSet="true",o.target.src=ct(),o.target.onerror=null},At=()=>{if(A.value===1){if(!q.value.length)return;A.value=2;return}if(A.value===2){if(!vt())return;A.value=3}},Bt=()=>{A.value>1&&(A.value-=1)};return yt(()=>K.query.product_id,(o,l)=>{o!==l&&(s.quantity=Number(K.query.quantity||1)||1,gt(),b.value=null,h.value=null,T.value=1,pt())}),yt(()=>K.query.quantity,o=>{L.value||o&&(s.quantity=Number(o)||1,gt())}),yt(()=>s.payment_method,()=>{L.value&&(F.value=[],A.value>2&&(A.value=2))}),yt(()=>[K.query.cart_mode,K.query.from_cart],()=>{Dt()?(L.value=!0,s.payment_method="cash",A.value=1,Tt()):L.value&&(L.value=!1,V.value="",b.value=null,A.value=1,F.value=[],pt())}),Zt(()=>{if(Dt()){L.value=!0,s.payment_method="cash",A.value=1,Tt();return}K.query.quantity&&(s.quantity=Number(K.query.quantity)||1,gt()),pt()}),(o,l)=>{var m,g,f,_,y,$,z,U,Q;const r=Wt("router-link");return c(),i("div",se,[L.value?(c(),i("div",ae,[W.value?(c(),i("div",oe,ie)):b.value?(c(),i("div",ce,[t("div",re,[(m=b.value)!=null&&m.cart_mode?(c(),i("div",de,[he,t("h2",_e,"Đã tạo "+a(b.value.orders.length)+" đơn hàng",1),ue,t("div",me,[(c(!0),i(H,null,Z(b.value.orders,n=>{var D;return c(),i("div",{key:n.id,class:"cart-order-item d-flex justify-content-between align-items-center border rounded-3 p-3 mb-2"},[t("div",be,[t("strong",null,"Đơn #"+a(n.ma_don_hang),1),t("p",pe,a(((D=n.san_pham)==null?void 0:D.ten_san_pham)||"Sản phẩm"),1)]),t("span",ve,a(C(n.tong_tien)),1)])}),128))]),t("div",ge,[t("p",ye,[d(" Tổng tiền: "),t("strong",null,a(C(b.value.total_amount)),1)]),t("p",fe," Phương thức thanh toán: "+a(rt(b.value.payment_method||s.payment_method)),1)]),F.value.length?(c(),i("div",ke,[xe,(c(!0),i(H,null,Z(F.value,n=>{var D,p,k,I,j,v;return c(),i("div",{key:`cart-success-${((D=n.orders)==null?void 0:D.length)||Math.random()}`,class:"payment-result-card border rounded-4 p-3 mb-3"},[t("div",we,[t("p",De,"Tổng hóa đơn cho "+a(((p=b.value.orders)==null?void 0:p.length)||0)+" đơn hàng",1),t("div",Te,[Ce,t("span",Ie,a(C(b.value.total_amount)),1)])]),b.value.payment_method==="vnpay"?(c(),i("div",Ne,[t("a",{href:n.paymentUrl,target:"_blank",class:"btn btn-primary w-100 btn-lg"},[Se,d(" Thanh toán VNPAY ngay ")],8,qe),t("p",Me,[Ae,d(" Bạn sẽ thanh toán tổng hóa đơn cho tất cả "+a(((k=b.value.orders)==null?void 0:k.length)||0)+" đơn hàng ",1)])])):(c(),i("div",Be,[(I=n.paymentData)!=null&&I.qr_code?(c(),i("div",$e,[t("img",{src:n.paymentData.qr_code,alt:"QR MBBank",class:"img-fluid mb-2",style:{"max-width":"250px"}},null,8,Ve),n.paymentData.bank_info?(c(),i("div",Pe,[t("p",Ue,[Re,d(" "+a(n.paymentData.bank_info.name),1)]),t("p",Qe,[Ee,d(" "+a(n.paymentData.bank_info.number),1)]),t("p",Ke,[je,d(" "+a(n.paymentData.bank_info.owner),1)])])):w("",!0)])):w("",!0),t("div",Oe,[t("a",{href:n.paymentUrl||((j=n.paymentData)==null?void 0:j.payment_url),target:"_blank",class:"btn btn-primary w-100 mb-2 btn-lg"},[Ge,d(" Mở app MBBank để thanh toán ")],8,Ye),(v=n.paymentData)!=null&&v.transaction_id?(c(),i("div",Le,[t("small",null,"Mã giao dịch: "+a(n.paymentData.transaction_id),1)])):w("",!0),ze])]))])}),128)),t("div",He,[Fe,t("ul",Je,[(c(!0),i(H,null,Z(b.value.orders,n=>(c(),i("li",{key:n.id}," Đơn #"+a(n.ma_don_hang)+" - "+a(C(n.tong_tien)),1))),128))])]),t("p",Xe,"Sau khi thanh toán thành công, tất cả "+a(((g=b.value.orders)==null?void 0:g.length)||0)+" đơn hàng sẽ được cập nhật trạng thái thanh toán.",1)])):(c(),i("div",Ze,[We,d(" Bạn sẽ thanh toán trực tiếp khi nhận hàng. ")])),et(r,{to:"/gio-hang",class:"btn btn-outline-secondary mt-4"},{default:nt(()=>[d(" Quay lại giỏ hàng ")]),_:1})])):w("",!0)])])):V.value&&!q.value.length?(c(),i("div",tn,[t("div",en,[t("div",nn,[sn,t("p",null,a(V.value),1),et(r,{to:"/gio-hang",class:"btn btn-primary"},{default:nt(()=>[d("Quay lại giỏ hàng")]),_:1})])])])):(c(),i("div",an,[t("div",on,[t("div",ln,[cn,t("div",rn,[dn,hn,t("p",_n,"Đảm bảo an toàn cho "+a(q.value.length)+" sản phẩm bạn đã chọn. Tất cả thông tin được mã hóa và bảo mật.",1)]),et(r,{to:"/gio-hang",class:"btn btn-outline-light text-white"},{default:nt(()=>[un,d(" Quay lại giỏ hàng ")]),_:1})]),t("div",mn,[t("div",{class:M(["progress-step",{active:A.value>=1}])},vn,2),t("div",{class:M(["progress-line",{active:A.value>1}])},null,2),t("div",{class:M(["progress-step",{active:A.value>=2}])},fn,2),t("div",{class:M(["progress-line",{active:A.value>2}])},null,2),t("div",{class:M(["progress-step",{active:A.value>=3}])},wn,2)])]),t("div",Dn,[t("div",Tn,[A.value===1?(c(),i("div",Cn,[In,t("div",Nn,[(c(!0),i(H,null,Z(q.value,n=>(c(),i("div",{key:n.id,class:"cart-item-card rounded-4 border d-flex flex-column flex-md-row gap-3 p-3 mb-3"},[t("div",qn,[t("div",Sn,[t("img",{src:kt(at)(n.image)||ct(),alt:n.name,onError:dt},null,40,Mn)]),t("div",An,[t("div",Bn,[t("div",null,[t("p",$n,"#"+a(n.id),1),t("h6",Vn,a(n.name),1)]),t("div",Pn,[Un,t("p",Rn,a(C(n.price)),1)])]),t("div",Qn,[t("span",En,[Kn,d(" Số lượng: "),t("strong",null,a(n.quantity),1)]),jn])])]),t("div",On,[Yn,t("p",Gn,a(C(n.price*n.quantity)),1)])]))),128)),q.value.length?w("",!0):(c(),i("p",Ln,"Không có sản phẩm nào được chọn."))]),t("div",zn,[et(r,{to:"/gio-hang",class:"btn btn-outline-secondary"},{default:nt(()=>[Hn,d(" Quay lại giỏ hàng ")]),_:1}),t("button",{class:"btn btn-primary",type:"button",onClick:At,disabled:!q.value.length}," Tiếp tục bước 2 ",8,Fn)])])):A.value===2?(c(),i("div",Jn,[Xn,t("div",Zn,[t("div",Wn,[t("div",ts,[es,t("div",ns,[ss,R(t("input",{type:"text",class:M(["form-control",{"is-invalid":N.buyer_name}]),"onUpdate:modelValue":l[0]||(l[0]=n=>s.buyer_name=n),placeholder:"Nguyễn Văn A"},null,2),[[O,s.buyer_name,void 0,{trim:!0}]])]),N.buyer_name?(c(),i("div",as,a(N.buyer_name),1)):w("",!0)]),t("div",os,[ls,t("div",is,[cs,R(t("input",{type:"tel",class:M(["form-control",{"is-invalid":N.buyer_phone}]),"onUpdate:modelValue":l[1]||(l[1]=n=>s.buyer_phone=n),placeholder:"0901 234 567"},null,2),[[O,s.buyer_phone,void 0,{trim:!0}]])]),N.buyer_phone?(c(),i("div",rs,a(N.buyer_phone),1)):w("",!0)]),t("div",ds,[hs,t("div",_s,[us,R(t("input",{type:"email",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=n=>s.buyer_email=n),placeholder:"email@example.com"},null,512),[[O,s.buyer_email,void 0,{trim:!0}]])])]),t("div",ms,[bs,t("div",ps,[vs,R(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[3]||(l[3]=n=>s.shipping_address=n),placeholder:"Số nhà, phường/xã, quận/huyện, tỉnh/thành phố"},null,512),[[O,s.shipping_address,void 0,{trim:!0}]])])]),t("div",gs,[ys,R(t("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":l[4]||(l[4]=n=>s.notes=n),placeholder:"Yêu cầu giao hàng (ví dụ: gọi trước khi giao...)"},null,512),[[O,s.notes,void 0,{trim:!0}]])])]),t("div",fs,[ks,xs,t("div",ws,[(c(),i(H,null,Z(bt,n=>t("button",{key:n.value,type:"button",class:M(["payment-option-card",{active:s.payment_method===n.value}]),onClick:D=>s.payment_method=n.value},[t("div",{class:M(["payment-option-icon",{"icon-vnpay":n.value==="vnpay","icon-mbbank":n.value==="mbbank","icon-cash":n.value==="cash"}])},[t("i",{class:M(n.icon)},null,2)],2),t("div",Ts,[t("div",Cs,[t("span",Is,a(n.label),1),n.badge?(c(),i("span",Ns,a(n.badge),1)):w("",!0)]),t("p",qs,a(n.desc),1)])],10,Ds)),64))]),s.payment_method==="cash"?(c(),i("div",Ss,[Ms,d(" Bạn sẽ thanh toán trực tiếp với nhân viên giao hàng. ")])):(c(),i("div",As,[Bs,d(" Sau khi xác nhận, chúng tôi sẽ tạo link/QR thanh toán cho từng đơn hàng của bạn. ")]))])]),t("div",{class:"step-actions d-flex justify-content-between gap-2 border-top pt-3 px-3 pb-3"},[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:Bt},[$s,d(" Bước 1 ")]),t("button",{class:"btn btn-primary",type:"button",onClick:At}," Tiếp tục bước 3 ")])])):(c(),i("div",Vs,[Ps,t("div",Us,[t("div",Rs,[Qs,t("dl",Es,[Ks,t("dd",js,a(s.buyer_name||"Chưa cung cấp"),1),Os,t("dd",Ys,a(s.buyer_phone||"Chưa cung cấp"),1),Gs,t("dd",Ls,a(s.shipping_address||"Chưa cung cấp"),1),zs,t("dd",Hs,a(s.notes||"Không có"),1)])]),t("div",Fs,[Js,(c(!0),i(H,null,Z(q.value,n=>(c(),i("div",{key:`confirm-${n.id}`,class:"cart-review-item border rounded-4 d-flex justify-content-between p-3 mb-2"},[t("div",Xs,[t("p",Zs,a(n.name),1),t("small",Ws,"x"+a(n.quantity)+" • "+a(C(n.price)),1)]),t("div",ta,[ea,t("p",na,a(C(n.price*n.quantity)),1)])]))),128))]),s.payment_method!=="cash"?(c(),i("div",sa,[aa,t("p",oa,"Bạn sẽ thanh toán tổng hóa đơn cho tất cả "+a(q.value.length)+" đơn hàng trong một giao dịch.",1),F.value.length?(c(),i("div",la,[(c(!0),i(H,null,Z(F.value,n=>{var D,p,k,I;return c(),i("div",{key:`payment-${((D=n.orders)==null?void 0:D.length)||Math.random()}`,class:"payment-result-card border rounded-4 p-3 mb-3"},[t("div",ia,[t("p",ca,"Tổng hóa đơn cho "+a(q.value.length)+" đơn hàng",1),t("div",ra,[da,t("span",ha,a(C(mt.value.total)),1)])]),s.payment_method==="vnpay"?(c(),i("div",_a,[t("a",{href:n.paymentUrl,target:"_blank",class:"btn btn-primary w-100 btn-lg"},[ma,d(" Thanh toán VNPAY ngay ")],8,ua),ba])):s.payment_method==="mbbank"?(c(),i("div",pa,[(p=n.paymentData)!=null&&p.qr_code?(c(),i("div",va,[t("img",{src:n.paymentData.qr_code,alt:"QR MBBank",class:"img-fluid mb-2",style:{"max-width":"250px"}},null,8,ga),n.paymentData.bank_info?(c(),i("div",ya,[t("p",fa,[ka,d(" "+a(n.paymentData.bank_info.name),1)]),t("p",xa,[wa,d(" "+a(n.paymentData.bank_info.number),1)]),t("p",Da,[Ta,d(" "+a(n.paymentData.bank_info.owner),1)])])):w("",!0)])):w("",!0),t("div",Ca,[n.paymentUrl||(k=n.paymentData)!=null&&k.payment_url?(c(),i("a",{key:0,href:n.paymentUrl||n.paymentData.payment_url,target:"_blank",class:"btn btn-primary flex-grow-1"},[Na,d(" Mở app MBBank ")],8,Ia)):w("",!0),(I=n.paymentData)!=null&&I.transaction_id?(c(),i("div",qa,[t("small",null,"Mã giao dịch: "+a(n.paymentData.transaction_id),1)])):w("",!0)])])):w("",!0)])}),128))])):(c(),i("div",Sa,[Ma,d(' Bấm "Xác nhận" để tạo link/QR thanh toán cho tổng hóa đơn. ')]))])):(c(),i("div",Aa,[Ba,d(" Bạn sẽ thanh toán trực tiếp với nhân viên giao hàng khi nhận sản phẩm. ")]))]),t("div",$a,[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:Bt},[Va,d(" Bước 2 ")]),t("button",{class:"btn btn-success btn-lg",type:"button",onClick:St,disabled:J.value||!q.value.length},[J.value?(c(),i("span",Ua)):(c(),i("span",Ra,[Qa,d(" Xác nhận đặt "+a(q.value.length)+" đơn",1)]))],8,Pa)])]))]),t("div",Ea,[t("div",Ka,[t("div",ja,[t("div",Oa,[Ya,t("span",Ga,[La,d(" "+a(rt(s.payment_method)),1)])]),t("div",za,[Ha,t("span",Fa,a(C(mt.value.subtotal)),1)]),Ja,t("div",Xa,[Za,t("span",Wa,"-"+a(C(mt.value.discount)),1)]),t("div",to,[t("div",null,[eo,t("h3",no,a(C(mt.value.total)),1)]),t("div",so,[t("p",ao,a(Et.value)+" sản phẩm",1),t("p",oo,a(rt(s.payment_method)),1)])]),lo])]),io])])]))])):(c(),i(H,{key:1},[W.value?(c(),i("div",co,ho)):V.value&&!h.value?(c(),i("div",_o,[t("div",uo,[t("div",mo,[bo,t("p",null,a(V.value),1),t("button",{class:"btn btn-primary",type:"button",onClick:pt},"Thử lại"),et(r,{to:"/danh-sach-san-pham",class:"btn btn-outline-secondary ms-2"},{default:nt(()=>[d("Xem sản phẩm khác")]),_:1})])])])):b.value?(c(),i("div",po,[t("div",vo,[t("div",go,[t("div",yo,[t("div",fo,[ko,xo,wo,t("div",Do,[t("div",To,[Co,t("span",Io,[d("Mã đơn: "),t("strong",null,a(b.value.ma_don_hang),1)])]),t("div",No,[t("div",qo,[t("div",So,[t("img",{src:Kt.value,alt:((_=(f=b.value)==null?void 0:f.san_pham)==null?void 0:_.ten_san_pham)||((y=h.value)==null?void 0:y.name),onError:dt},null,40,Mo)]),t("div",Ao,[t("h6",null,a(((z=($=b.value)==null?void 0:$.san_pham)==null?void 0:z.ten_san_pham)||((U=h.value)==null?void 0:U.name)),1),t("p",Bo,"Số lượng: "+a(b.value.so_luong),1)]),t("div",$o,[t("strong",null,a(C(b.value.tong_tien)),1)])])]),t("div",Vo,[t("div",Po,[t("div",Uo,[Ro,t("span",null,a(C(b.value.tong_tien)),1)]),Qo,t("div",Eo,[Ko,t("span",null,a(C(b.value.tong_tien)),1)])]),t("div",jo,[t("p",null,[Oo,d(" "+a(rt(b.value.payment_method)),1)]),t("p",Yo,a(Mt(b.value.payment_method)),1),lt.value&&b.value.payment_method==="vnpay"?(c(),i("div",Go,[t("a",{href:lt.value,target:"_blank",class:"btn btn-primary btn-lg w-100"},[zo,d(" Thanh toán VNPAY ngay ")],8,Lo),Ho])):w("",!0),b.value.payment_method==="mbbank"?(c(),i("div",Fo,[ut.value?(c(),i("div",Jo,Wo)):B.value?(c(),i("div",tl,[B.value.qr_code||B.value.qrCode?(c(),i("div",el,[nl,t("div",sl,[t("img",{src:B.value.qr_code||B.value.qrCode,alt:"MBBank QR Code",class:"qr-code-img",style:{"max-width":"300px",border:"1px solid #ddd",padding:"10px",background:"white","border-radius":"8px"}},null,8,al)])])):w("",!0),B.value.payment_url||B.value.paymentUrl?(c(),i("div",ol,[t("a",{href:B.value.payment_url||B.value.paymentUrl,target:"_blank",class:"btn btn-primary btn-lg w-100"},[il,d(" Thanh toán MBBank ngay ")],8,ll)])):w("",!0),B.value.transaction_id||B.value.transactionId||B.value.id?(c(),i("div",cl,[t("small",null,[rl,d(" "+a(B.value.transaction_id||B.value.transactionId||B.value.id),1)])])):w("",!0),B.value.status?(c(),i("div",{key:3,class:M(["alert",B.value.status==="success"?"alert-success":"alert-info"])},[t("small",null,[dl,d(" "+a(B.value.status),1)])],2)):w("",!0)])):(c(),i("div",hl,[_l,t("button",{class:"btn btn-sm btn-primary",onClick:l[5]||(l[5]=n=>o.createPayment(b.value.id,"mbbank")),disabled:ut.value},[ml,d(" Thử lại ")],8,ul)]))])):w("",!0)])])]),t("div",bl,[t("button",{class:"btn btn-success btn-lg",type:"button",onClick:l[6]||(l[6]=n=>kt(wt).push("/trang-chu"))},[pl,d(" Về trang chủ ")]),t("button",{class:"btn btn-outline-primary btn-lg",type:"button",onClick:l[7]||(l[7]=n=>kt(wt).push(`/san-pham/${b.value.san_pham_id||ft.value}`))},[vl,d(" Xem lại sản phẩm ")])])])])])])])):h.value?(c(),i("div",gl,[t("div",yl,[t("nav",fl,[t("ol",kl,[t("li",xl,[et(r,{to:"/trang-chu"},{default:nt(()=>[d("Trang chủ")]),_:1})]),t("li",wl,[et(r,{to:"/danh-sach-san-pham"},{default:nt(()=>[d("Sản phẩm")]),_:1})]),Dl])]),t("div",Tl,[t("div",{class:M(["step",{active:T.value>=1,completed:T.value>1}])},Nl,2),ql,t("div",{class:M(["step",{active:T.value>=2,completed:T.value>2}])},Al,2),Bl,t("div",{class:M(["step",{active:T.value>=3,completed:T.value>3}])},Pl,2)]),t("div",Ul,[t("div",Rl,[R(t("div",Ql,[t("div",El,[Kl,t("div",jl,[t("div",Ol,[t("div",Yl,[t("img",{src:ot.value,alt:h.value.name,class:"product-thumb",onError:dt},null,40,Gl),t("div",Ll,[t("h6",zl,a(h.value.name),1),t("p",Hl,a(((Q=h.value.category)==null?void 0:Q.name)||h.value.category||"Danh mục khác"),1),t("div",Fl,[t("span",Jl,a(C(h.value.price)),1),t("div",Xl,[t("button",{class:"btn btn-sm btn-light",type:"button",onClick:l[8]||(l[8]=n=>It(-1)),disabled:s.quantity<=1},"−",8,Zl),R(t("input",{type:"number",min:"1",max:"99","onUpdate:modelValue":l[9]||(l[9]=n=>s.quantity=n),onInput:gt,class:"quantity-input"},null,544),[[O,s.quantity,void 0,{number:!0}]]),t("button",{class:"btn btn-sm btn-light",type:"button",onClick:l[10]||(l[10]=n=>It(1))},"＋")])])]),t("div",Wl,[ti,t("h5",ei,a(C(it.value)),1)])])]),ni,si,t("div",ai,[t("div",oi,[li,R(t("input",{"onUpdate:modelValue":l[11]||(l[11]=n=>s.buyer_name=n),type:"text",class:M(["form-control",{"is-invalid":N.buyer_name}]),placeholder:"Nguyễn Văn A",required:""},null,2),[[O,s.buyer_name]]),N.buyer_name?(c(),i("div",ii,a(N.buyer_name),1)):w("",!0)]),t("div",ci,[ri,R(t("input",{"onUpdate:modelValue":l[12]||(l[12]=n=>s.buyer_phone=n),type:"tel",class:M(["form-control",{"is-invalid":N.buyer_phone}]),placeholder:"0123 456 789"},null,2),[[O,s.buyer_phone]]),N.buyer_phone?(c(),i("div",di,a(N.buyer_phone),1)):w("",!0)]),t("div",hi,[_i,R(t("input",{"onUpdate:modelValue":l[13]||(l[13]=n=>s.buyer_email=n),type:"email",class:M(["form-control",{"is-invalid":N.buyer_email}]),placeholder:"example@email.com"},null,2),[[O,s.buyer_email]]),N.buyer_email?(c(),i("div",ui,a(N.buyer_email),1)):w("",!0)]),t("div",mi,[bi,R(t("input",{"onUpdate:modelValue":l[14]||(l[14]=n=>s.shipping_address=n),type:"text",class:"form-control",placeholder:"Số nhà, đường, quận/huyện, thành phố"},null,512),[[O,s.shipping_address]])]),t("div",pi,[vi,R(t("textarea",{"onUpdate:modelValue":l[15]||(l[15]=n=>s.notes=n),class:"form-control",rows:"3",placeholder:"Ví dụ: Giao chiều thứ 7, gọi mình trước 30 phút..."},null,512),[[O,s.notes]])])])])])],512),[[xt,T.value===1]]),R(t("div",gi,[t("div",yi,[fi,t("div",ki,[t("div",xi,[(c(),i(H,null,Z(bt,n=>t("label",{key:n.value,class:M(["payment-option-card",{active:s.payment_method===n.value}]),onClick:D=>s.payment_method=n.value},[R(t("input",{type:"radio",value:n.value,"onUpdate:modelValue":l[16]||(l[16]=D=>s.payment_method=D),class:"form-check-input"},null,8,Di),[[te,s.payment_method]]),t("div",{class:M(["payment-option-icon",`icon-${n.value}`])},[t("i",{class:M(n.icon)},null,2)],2),t("div",Ti,[t("div",Ci,a(n.label),1),t("div",Ii,a(n.desc),1)]),n.badge?(c(),i("span",Ni,a(n.badge),1)):w("",!0)],10,wi)),64))]),t("div",qi,[Si,t("span",Mi,a(Mt(s.payment_method)),1)])])])],512),[[xt,T.value===2]]),R(t("div",Ai,[t("div",Bi,[$i,t("div",Vi,[t("div",Pi,[t("div",Ui,[Ri,t("div",Qi,[t("img",{src:ot.value,alt:h.value.name,class:"review-thumb",onError:dt},null,40,Ei),t("div",Ki,[t("h6",ji,a(h.value.name),1),t("p",Oi,"Số lượng: "+a(s.quantity)+" x "+a(C(h.value.price)),1)]),t("div",Yi,[t("strong",Gi,a(C(it.value)),1)])])]),Li,t("div",zi,[Hi,t("div",Fi,[t("p",null,[Ji,d(" "+a(s.buyer_name),1)]),s.buyer_phone?(c(),i("p",Xi,[Zi,d(" "+a(s.buyer_phone),1)])):w("",!0),s.buyer_email?(c(),i("p",Wi,[tc,d(" "+a(s.buyer_email),1)])):w("",!0),s.shipping_address?(c(),i("p",ec,[nc,d(" "+a(s.shipping_address),1)])):w("",!0),s.notes?(c(),i("p",sc,[ac,d(" "+a(s.notes),1)])):w("",!0)])]),oc,t("div",lc,[ic,t("div",cc,[t("i",{class:M(Ht(s.payment_method))},null,2),t("span",null,a(rt(s.payment_method)),1)])]),rc,t("div",dc,[t("div",hc,[t("div",_c,[uc,t("span",null,a(C(it.value)),1)]),mc,t("div",bc,[pc,t("span",null,a(C(it.value)),1)])])])])])])],512),[[xt,T.value===3]])]),t("div",vc,[t("div",gc,[t("div",yc,[fc,t("div",kc,[t("div",xc,[t("img",{src:ot.value,alt:h.value.name,class:"summary-thumb",onError:dt},null,40,wc),t("div",Dc,[t("p",Tc,a(h.value.name),1),t("p",Cc,"Số lượng: "+a(s.quantity),1)])]),Ic,t("div",Nc,[t("div",qc,[Sc,t("span",null,a(C(h.value.price)),1)]),t("div",Mc,[Ac,t("span",null,a(s.quantity),1)]),Bc,$c,t("div",Vc,[Pc,t("span",Uc,a(C(it.value)),1)])])]),t("div",Rc,[T.value===1?(c(),i("button",{key:0,class:"btn btn-primary w-100",type:"button",onClick:Ct,disabled:!jt.value},[d(" Tiếp tục "),Ec],8,Qc)):T.value===2?(c(),i("button",{key:1,class:"btn btn-primary w-100",type:"button",onClick:Ct},[d(" Tiếp tục "),Kc])):T.value===3?(c(),i("button",{key:2,class:"btn btn-success w-100 btn-lg",type:"button",onClick:zt,disabled:J.value},[J.value?(c(),i("span",Oc)):(c(),i("span",Yc,[Gc,d(" Xác nhận đặt hàng")]))],8,jc)):w("",!0)])]),t("div",Lc,[T.value>1?(c(),i("button",{key:0,class:"btn btn-outline-secondary w-100",type:"button",onClick:Ot},[zc,d(" Quay lại ")])):w("",!0)])])])])])])):w("",!0)],64))])}}},Wc=Ft(Hc,[["__scopeId","data-v-997749e2"]]);export{Wc as default};
